<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title id="head-title">test_report.html</title>
      <style type="text/css">body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 12px;
  /* do not increase min-width as some may use split screens */
  min-width: 800px;
  color: #999;
}

h1 {
  font-size: 24px;
  color: black;
}

h2 {
  font-size: 16px;
  color: black;
}

p {
  color: black;
}

a {
  color: #999;
}

table {
  border-collapse: collapse;
}

/******************************
 * SUMMARY INFORMATION
 ******************************/
#environment td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  vertical-align: top;
}
#environment tr:nth-child(odd) {
  background-color: #f6f6f6;
}
#environment ul {
  margin: 0;
  padding: 0 20px;
}

/******************************
 * TEST RESULT COLORS
 ******************************/
span.passed,
.passed .col-result {
  color: green;
}

span.skipped,
span.xfailed,
span.rerun,
.skipped .col-result,
.xfailed .col-result,
.rerun .col-result {
  color: orange;
}

span.error,
span.failed,
span.xpassed,
.error .col-result,
.failed .col-result,
.xpassed .col-result {
  color: red;
}

.col-links__extra {
  margin-right: 3px;
}

/******************************
 * RESULTS TABLE
 *
 * 1. Table Layout
 * 2. Extra
 * 3. Sorting items
 *
 ******************************/
/*------------------
 * 1. Table Layout
 *------------------*/
#results-table {
  border: 1px solid #e6e6e6;
  color: #999;
  font-size: 12px;
  width: 100%;
}
#results-table th,
#results-table td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  text-align: left;
}
#results-table th {
  font-weight: bold;
}

/*------------------
 * 2. Extra
 *------------------*/
.logwrapper {
  max-height: 230px;
  overflow-y: scroll;
  background-color: #e6e6e6;
}
.logwrapper.expanded {
  max-height: none;
}
.logwrapper.expanded .logexpander:after {
  content: "collapse [-]";
}
.logwrapper .logexpander {
  z-index: 1;
  position: sticky;
  top: 10px;
  width: max-content;
  border: 1px solid;
  border-radius: 3px;
  padding: 5px 7px;
  margin: 10px 0 10px calc(100% - 80px);
  cursor: pointer;
  background-color: #e6e6e6;
}
.logwrapper .logexpander:after {
  content: "expand [+]";
}
.logwrapper .logexpander:hover {
  color: #000;
  border-color: #000;
}
.logwrapper .log {
  min-height: 40px;
  position: relative;
  top: -50px;
  height: calc(100% + 50px);
  border: 1px solid #e6e6e6;
  color: black;
  display: block;
  font-family: "Courier New", Courier, monospace;
  padding: 5px;
  padding-right: 80px;
  white-space: pre-wrap;
}

div.media {
  border: 1px solid #e6e6e6;
  float: right;
  height: 240px;
  margin: 0 5px;
  overflow: hidden;
  width: 320px;
}

.media-container {
  display: grid;
  grid-template-columns: 25px auto 25px;
  align-items: center;
  flex: 1 1;
  overflow: hidden;
  height: 200px;
}

.media-container--fullscreen {
  grid-template-columns: 0px auto 0px;
}

.media-container__nav--right,
.media-container__nav--left {
  text-align: center;
  cursor: pointer;
}

.media-container__viewport {
  cursor: pointer;
  text-align: center;
  height: inherit;
}
.media-container__viewport img,
.media-container__viewport video {
  object-fit: cover;
  width: 100%;
  max-height: 100%;
}

.media__name,
.media__counter {
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  flex: 0 0 25px;
  align-items: center;
}

.collapsible td:not(.col-links) {
  cursor: pointer;
}
.collapsible td:not(.col-links):hover::after {
  color: #bbb;
  font-style: italic;
  cursor: pointer;
}

.col-result {
  width: 130px;
}
.col-result:hover::after {
  content: " (hide details)";
}

.col-result.collapsed:hover::after {
  content: " (show details)";
}

#environment-header h2:hover::after {
  content: " (hide details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

#environment-header.collapsed h2:hover::after {
  content: " (show details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

/*------------------
 * 3. Sorting items
 *------------------*/
.sortable {
  cursor: pointer;
}
.sortable.desc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: -12.5px;
  border: 10px solid #4caf50;
  border-bottom: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}
.sortable.asc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: 12.5px;
  border: 10px solid #4caf50;
  border-top: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}

.hidden, .summary__reload__button.hidden {
  display: none;
}

.summary__data {
  flex: 0 0 550px;
}
.summary__reload {
  flex: 1 1;
  display: flex;
  justify-content: center;
}
.summary__reload__button {
  flex: 0 0 300px;
  display: flex;
  color: white;
  font-weight: bold;
  background-color: #4caf50;
  text-align: center;
  justify-content: center;
  align-items: center;
  border-radius: 3px;
  cursor: pointer;
}
.summary__reload__button:hover {
  background-color: #46a049;
}
.summary__spacer {
  flex: 0 0 550px;
}

.controls {
  display: flex;
  justify-content: space-between;
}

.filters,
.collapse {
  display: flex;
  align-items: center;
}
.filters button,
.collapse button {
  color: #999;
  border: none;
  background: none;
  cursor: pointer;
  text-decoration: underline;
}
.filters button:hover,
.collapse button:hover {
  color: #ccc;
}

.filter__label {
  margin-right: 10px;
}

      </style>
    
  </head>
  <body>
    <h1 id="title">test_report.html</h1>
    <p>Report generated on 20-Sep-2025 at 16:38:16 by <a href="https://pypi.python.org/pypi/pytest-html">pytest-html</a>
        v4.1.1</p>
    <div id="environment-header">
      <h2>Environment</h2>
    </div>
    <table id="environment"></table>
    <!-- TEMPLATES -->
      <template id="template_environment_row">
      <tr>
        <td></td>
        <td></td>
      </tr>
    </template>
    <template id="template_results-table__body--empty">
      <tbody class="results-table-row">
        <tr id="not-found-message">
          <td colspan="4">No results found. Check the filters.</th>
        </tr>
    </template>
    <template id="template_results-table__tbody">
      <tbody class="results-table-row">
        <tr class="collapsible">
        </tr>
        <tr class="extras-row">
          <td class="extra" colspan="4">
            <div class="extraHTML"></div>
            <div class="media">
              <div class="media-container">
                  <div class="media-container__nav--left"><</div>
                  <div class="media-container__viewport">
                    <img src="" />
                    <video controls>
                      <source src="" type="video/mp4">
                    </video>
                  </div>
                  <div class="media-container__nav--right">></div>
                </div>
                <div class="media__name"></div>
                <div class="media__counter"></div>
            </div>
            <div class="logwrapper">
              <div class="logexpander"></div>
              <div class="log"></div>
            </div>
          </td>
        </tr>
      </tbody>
    </template>
    <!-- END TEMPLATES -->
    <div class="summary">
      <div class="summary__data">
        <h2>Summary</h2>
        <div class="additional-summary prefix">
        </div>
        <p class="run-count">88 tests took 00:00:01.</p>
        <p class="filter">(Un)check the boxes to filter the results.</p>
        <div class="summary__reload">
          <div class="summary__reload__button hidden" onclick="location.reload()">
            <div>There are still tests running. <br />Reload this page to get the latest results!</div>
          </div>
        </div>
        <div class="summary__spacer"></div>
        <div class="controls">
          <div class="filters">
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="failed" />
            <span class="failed">25 Failed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="passed" />
            <span class="passed">63 Passed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="skipped" disabled/>
            <span class="skipped">0 Skipped,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xfailed" disabled/>
            <span class="xfailed">0 Expected failures,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xpassed" disabled/>
            <span class="xpassed">0 Unexpected passes,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="error" />
            <span class="error">11 Errors,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="rerun" disabled/>
            <span class="rerun">0 Reruns</span>
          </div>
          <div class="collapse">
            <button id="show_all_details">Show all details</button>&nbsp;/&nbsp;<button id="hide_all_details">Hide all details</button>
          </div>
        </div>
      </div>
      <div class="additional-summary summary">
      </div>
      <div class="additional-summary postfix">
      </div>
    </div>
    <table id="results-table">
      <thead id="results-table-head">
        <tr>
          <th class="sortable" data-column-type="result">Result</th>
          <th class="sortable" data-column-type="testId">Test</th>
          <th class="sortable" data-column-type="duration">Duration</th>
          <th>Links</th>
        </tr>
      </thead>
    </table>
  </body>
  <footer>
    <div id="data-container" data-jsonblob="{&#34;environment&#34;: {&#34;Python&#34;: &#34;3.13.5&#34;, &#34;Platform&#34;: &#34;macOS-26.0-x86_64-i386-64bit-Mach-O&#34;, &#34;Packages&#34;: {&#34;pytest&#34;: &#34;8.4.1&#34;, &#34;pluggy&#34;: &#34;1.6.0&#34;}, &#34;Plugins&#34;: {&#34;mock&#34;: &#34;3.15.1&#34;, &#34;html&#34;: &#34;4.1.1&#34;, &#34;xdist&#34;: &#34;3.8.0&#34;, &#34;timeout&#34;: &#34;2.4.0&#34;, &#34;metadata&#34;: &#34;3.1.1&#34;, &#34;Faker&#34;: &#34;37.8.0&#34;, &#34;benchmark&#34;: &#34;5.1.0&#34;, &#34;profiling&#34;: &#34;1.8.1&#34;, &#34;requests-mock&#34;: &#34;1.12.1&#34;, &#34;cov&#34;: &#34;7.0.0&#34;}}, &#34;tests&#34;: {&#34;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_successful_complete_flow&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_successful_complete_flow&#34;, &#34;duration&#34;: &#34;75 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_successful_complete_flow&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;75 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_complete_flow.TestCompleteReceiptFlow object at 0x10f17d310&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\ncomplete_payment_data = {&amp;#x27;amount&amp;#x27;: 250.0, &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-09-20T16:38:13.816632&amp;#x27;, &amp;#x27;currency&amp;#x27;: &amp;#x27;BRL&amp;#x27;, &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_INTEGRATION_001&amp;#x27;, ...}\nvalid_receipt_file = &amp;lt;_io.BytesIO object at 0x10f407e20&amp;gt;\n\n    @pytest.mark.integration\n    def test_successful_complete_flow(self, client, complete_payment_data, valid_receipt_file):\n        &amp;quot;&amp;quot;&amp;quot;Testa fluxo completo bem-sucedido&amp;quot;&amp;quot;&amp;quot;\n        payment_data = complete_payment_data\n    \n        # Etapa 1: Upload do comprovante\n        upload_response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n            &amp;#x27;payment_id&amp;#x27;: payment_data[&amp;#x27;payment_id&amp;#x27;],\n            &amp;#x27;serial_number&amp;#x27;: payment_data[&amp;#x27;serial_number&amp;#x27;],\n            &amp;#x27;user_id&amp;#x27;: payment_data[&amp;#x27;user_id&amp;#x27;],\n            &amp;#x27;file&amp;#x27;: (valid_receipt_file, &amp;#x27;comprovante_pix.png&amp;#x27;)\n        })\n    \n        # Verificar upload bem-sucedido\n&amp;gt;       assert upload_response.status_code in [200, 201], &amp;quot;Upload deveria ser bem-sucedido&amp;quot;\nE       AssertionError: Upload deveria ser bem-sucedido\nE       assert 404 in [200, 201]\nE        +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/integration/test_complete_flow.py:67: AssertionError\n&#34;}], &#34;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_flow_with_rejection&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_flow_with_rejection&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_flow_with_rejection&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_complete_flow.TestCompleteReceiptFlow object at 0x10f17d810&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\ncomplete_payment_data = {&amp;#x27;amount&amp;#x27;: 250.0, &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-09-20T16:38:13.869882&amp;#x27;, &amp;#x27;currency&amp;#x27;: &amp;#x27;BRL&amp;#x27;, &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_INTEGRATION_001&amp;#x27;, ...}\n\n    @pytest.mark.integration\n    def test_flow_with_rejection(self, client, complete_payment_data):\n        &amp;quot;&amp;quot;&amp;quot;Testa fluxo com rejei\u00e7\u00e3o do comprovante&amp;quot;&amp;quot;&amp;quot;\n        payment_data = complete_payment_data\n    \n        # Criar arquivo inv\u00e1lido\n        invalid_file = BytesIO(b&amp;#x27;Invalid file content&amp;#x27;)\n    \n        # Upload de arquivo inv\u00e1lido\n        upload_response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n            &amp;#x27;payment_id&amp;#x27;: payment_data[&amp;#x27;payment_id&amp;#x27;],\n            &amp;#x27;serial_number&amp;#x27;: payment_data[&amp;#x27;serial_number&amp;#x27;],\n            &amp;#x27;user_id&amp;#x27;: payment_data[&amp;#x27;user_id&amp;#x27;],\n            &amp;#x27;file&amp;#x27;: (invalid_file, &amp;#x27;invalid.txt&amp;#x27;)\n        })\n    \n        # Verificar rejei\u00e7\u00e3o\n&amp;gt;       assert upload_response.status_code in [400, 422], &amp;quot;Arquivo inv\u00e1lido deveria ser rejeitado&amp;quot;\nE       AssertionError: Arquivo inv\u00e1lido deveria ser rejeitado\nE       assert 404 in [400, 422]\nE        +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/integration/test_complete_flow.py:156: AssertionError\n&#34;}], &#34;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_flow_with_duplicate_upload&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_flow_with_duplicate_upload&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_flow_with_duplicate_upload&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_complete_flow.TestCompleteReceiptFlow object at 0x10f1d48a0&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\ncomplete_payment_data = {&amp;#x27;amount&amp;#x27;: 250.0, &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-09-20T16:38:13.884224&amp;#x27;, &amp;#x27;currency&amp;#x27;: &amp;#x27;BRL&amp;#x27;, &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_INTEGRATION_001&amp;#x27;, ...}\nvalid_receipt_file = &amp;lt;_io.BytesIO object at 0x10f3be3e0&amp;gt;\n\n    @pytest.mark.integration\n    def test_flow_with_duplicate_upload(self, client, complete_payment_data, valid_receipt_file):\n        &amp;quot;&amp;quot;&amp;quot;Testa fluxo com tentativa de upload duplicado&amp;quot;&amp;quot;&amp;quot;\n        payment_data = complete_payment_data\n    \n        # Primeiro upload\n        first_upload = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n            &amp;#x27;payment_id&amp;#x27;: payment_data[&amp;#x27;payment_id&amp;#x27;],\n            &amp;#x27;serial_number&amp;#x27;: payment_data[&amp;#x27;serial_number&amp;#x27;],\n            &amp;#x27;user_id&amp;#x27;: payment_data[&amp;#x27;user_id&amp;#x27;],\n            &amp;#x27;file&amp;#x27;: (valid_receipt_file, &amp;#x27;comprovante_1.png&amp;#x27;)\n        })\n    \n&amp;gt;       assert first_upload.status_code in [200, 201], &amp;quot;Primeiro upload deveria ser bem-sucedido&amp;quot;\nE       AssertionError: Primeiro upload deveria ser bem-sucedido\nE       assert 404 in [200, 201]\nE        +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/integration/test_complete_flow.py:181: AssertionError\n&#34;}], &#34;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_flow_with_processing_timeout&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_flow_with_processing_timeout&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/integration/test_complete_flow.py::TestCompleteReceiptFlow::test_flow_with_processing_timeout&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_complete_flow.TestCompleteReceiptFlow object at 0x10f1d4b00&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\ncomplete_payment_data = {&amp;#x27;amount&amp;#x27;: 250.0, &amp;#x27;created_at&amp;#x27;: &amp;#x27;2025-09-20T16:38:13.898868&amp;#x27;, &amp;#x27;currency&amp;#x27;: &amp;#x27;BRL&amp;#x27;, &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_INTEGRATION_001&amp;#x27;, ...}\nvalid_receipt_file = &amp;lt;_io.BytesIO object at 0x10f3be9d0&amp;gt;\n\n    @pytest.mark.integration\n    def test_flow_with_processing_timeout(self, client, complete_payment_data, valid_receipt_file):\n        &amp;quot;&amp;quot;&amp;quot;Testa fluxo com timeout no processamento&amp;quot;&amp;quot;&amp;quot;\n        payment_data = complete_payment_data\n    \n        # Upload normal\n        upload_response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n            &amp;#x27;payment_id&amp;#x27;: payment_data[&amp;#x27;payment_id&amp;#x27;],\n            &amp;#x27;serial_number&amp;#x27;: payment_data[&amp;#x27;serial_number&amp;#x27;],\n            &amp;#x27;user_id&amp;#x27;: payment_data[&amp;#x27;user_id&amp;#x27;],\n            &amp;#x27;file&amp;#x27;: (valid_receipt_file, &amp;#x27;comprovante_timeout.png&amp;#x27;)\n        })\n    \n&amp;gt;       assert upload_response.status_code in [200, 201]\nE       assert 404 in [200, 201]\nE        +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/integration/test_complete_flow.py:226: AssertionError\n&#34;}], &#34;tests/integration/test_complete_flow.py::TestMultiUserScenarios::test_concurrent_users_different_payments&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/integration/test_complete_flow.py::TestMultiUserScenarios::test_concurrent_users_different_payments&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/integration/test_complete_flow.py::TestMultiUserScenarios::test_concurrent_users_different_payments&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n&amp;gt;               self.app.do_teardown_request(exc)\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:401: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py:2035: in do_teardown_request\n    for name in chain(request.blueprints, (None,)):\n                      ^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:311: in __get__\n    obj = instance._get_current_object()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    def _get_current_object() -&amp;gt; T:\n        try:\n            obj = local.get()\n        except LookupError:\n&amp;gt;           raise RuntimeError(unbound_message) from None\nE           RuntimeError: Working outside of request context.\nE           \nE           This typically means that you attempted to use functionality that needed\nE           an active HTTP request. Consult the documentation on testing for\nE           information about how to avoid this problem.\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:508: RuntimeError\n\nDuring handling of the above exception, another exception occurred:\n\nself = &amp;lt;test_complete_flow.TestMultiUserScenarios object at 0x10f17d950&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.integration\n    def test_concurrent_users_different_payments(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa usu\u00e1rios concorrentes com pagamentos diferentes&amp;quot;&amp;quot;&amp;quot;\n        import threading\n        from concurrent.futures import ThreadPoolExecutor, as_completed\n    \n        # Dados para m\u00faltiplos usu\u00e1rios\n        users_data = [\n            {\n                &amp;#x27;user_id&amp;#x27;: f&amp;#x27;USER_{i:03d}&amp;#x27;,\n                &amp;#x27;payment_id&amp;#x27;: f&amp;#x27;PAY_MULTI_{i:03d}&amp;#x27;,\n                &amp;#x27;serial_number&amp;#x27;: f&amp;#x27;SN_MULTI_{i:03d}&amp;#x27;,\n                &amp;#x27;user_email&amp;#x27;: f&amp;#x27;user{i}@example.com&amp;#x27;\n            }\n            for i in range(1, 6)  # 5 usu\u00e1rios\n        ]\n    \n        # Fun\u00e7\u00e3o para upload de um usu\u00e1rio\n        def user_upload(user_data):\n            # Criar arquivo \u00fanico para cada usu\u00e1rio\n            file_content = b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + f&amp;#x27;user_{user_data[&amp;quot;user_id&amp;quot;]}&amp;#x27;.encode() * 50\n            file_data = BytesIO(file_content)\n    \n            response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n                &amp;#x27;payment_id&amp;#x27;: user_data[&amp;#x27;payment_id&amp;#x27;],\n                &amp;#x27;serial_number&amp;#x27;: user_data[&amp;#x27;serial_number&amp;#x27;],\n                &amp;#x27;user_id&amp;#x27;: user_data[&amp;#x27;user_id&amp;#x27;],\n                &amp;#x27;file&amp;#x27;: (file_data, f&amp;#x27;comprovante_{user_data[&amp;quot;user_id&amp;quot;]}.png&amp;#x27;)\n            })\n    \n            return {\n                &amp;#x27;user_id&amp;#x27;: user_data[&amp;#x27;user_id&amp;#x27;],\n                &amp;#x27;status_code&amp;#x27;: response.status_code,\n                &amp;#x27;success&amp;#x27;: response.status_code in [200, 201],\n                &amp;#x27;response&amp;#x27;: response.get_json() if response.content_type == &amp;#x27;application/json&amp;#x27; else None\n            }\n    \n        # Executar uploads concorrentes\n        results = []\n        with ThreadPoolExecutor(max_workers=5) as executor:\n            futures = [executor.submit(user_upload, user_data) for user_data in users_data]\n    \n            for future in as_completed(futures):\n&amp;gt;               results.append(future.result())\n                               ^^^^^^^^^^^^^^^\n\ntests/integration/test_complete_flow.py:314: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/_base.py:449: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py:59: in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/integration/test_complete_flow.py:294: in user_upload\n    response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/test.py:1248: in post\n    return self.open(*args, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/testing.py:230: in open\n    self._context_stack.close()\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:627: in close\n    self.__exit__(None, None, None)\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:619: in __exit__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:604: in __exit__\n    if cb(*exc_details):\n       ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:434: in __exit__\n    self.pop(exc_value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n                self.app.do_teardown_request(exc)\n    \n                request_close = getattr(self.request, &amp;quot;close&amp;quot;, None)\n                if request_close is not None:\n                    request_close()\n        finally:\n&amp;gt;           ctx = _cv_request.get()\n                  ^^^^^^^^^^^^^^^^^\nE           LookupError: &amp;lt;ContextVar name=&amp;#x27;flask.request_ctx&amp;#x27; at 0x10fdad5d0&amp;gt;\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:407: LookupError\n&#34;}], &#34;tests/integration/test_complete_flow.py::TestMultiUserScenarios::test_user_isolation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/integration/test_complete_flow.py::TestMultiUserScenarios::test_user_isolation&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/integration/test_complete_flow.py::TestMultiUserScenarios::test_user_isolation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_complete_flow.TestMultiUserScenarios object at 0x10f17da90&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.integration\n    def test_user_isolation(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa isolamento entre usu\u00e1rios&amp;quot;&amp;quot;&amp;quot;\n        # Dados de dois usu\u00e1rios\n        user1_data = {\n            &amp;#x27;user_id&amp;#x27;: &amp;#x27;USER_ISOLATION_1&amp;#x27;,\n            &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_ISOLATION_1&amp;#x27;,\n            &amp;#x27;serial_number&amp;#x27;: &amp;#x27;SN_ISOLATION_1&amp;#x27;\n        }\n    \n        user2_data = {\n            &amp;#x27;user_id&amp;#x27;: &amp;#x27;USER_ISOLATION_2&amp;#x27;,\n            &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_ISOLATION_2&amp;#x27;,\n            &amp;#x27;serial_number&amp;#x27;: &amp;#x27;SN_ISOLATION_2&amp;#x27;\n        }\n    \n        # Upload do usu\u00e1rio 1\n        file1 = BytesIO(b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + b&amp;#x27;user1_content&amp;#x27; * 50)\n        upload1 = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n            **user1_data,\n            &amp;#x27;file&amp;#x27;: (file1, &amp;#x27;comprovante_user1.png&amp;#x27;)\n        })\n    \n&amp;gt;       assert upload1.status_code in [200, 201]\nE       assert 404 in [200, 201]\nE        +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/integration/test_complete_flow.py:355: AssertionError\n&#34;}], &#34;tests/integration/test_complete_flow.py::TestSystemRecoveryScenarios::test_recovery_after_service_restart&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/integration/test_complete_flow.py::TestSystemRecoveryScenarios::test_recovery_after_service_restart&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/integration/test_complete_flow.py::TestSystemRecoveryScenarios::test_recovery_after_service_restart&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_complete_flow.TestSystemRecoveryScenarios object at 0x10f17dbd0&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.integration\n    def test_recovery_after_service_restart(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa recupera\u00e7\u00e3o ap\u00f3s rein\u00edcio do servi\u00e7o&amp;quot;&amp;quot;&amp;quot;\n        # Simular estado antes do rein\u00edcio\n        pre_restart_data = {\n            &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_RESTART_TEST&amp;#x27;,\n            &amp;#x27;serial_number&amp;#x27;: &amp;#x27;SN_RESTART&amp;#x27;,\n            &amp;#x27;user_id&amp;#x27;: &amp;#x27;USER_RESTART&amp;#x27;,\n            &amp;#x27;status&amp;#x27;: &amp;#x27;processing&amp;#x27;\n        }\n    \n        # Upload inicial\n        file_data = BytesIO(b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + b&amp;#x27;restart_test&amp;#x27; * 50)\n        upload_response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n            **pre_restart_data,\n            &amp;#x27;file&amp;#x27;: (file_data, &amp;#x27;comprovante_restart.png&amp;#x27;)\n        })\n    \n&amp;gt;       assert upload_response.status_code in [200, 201]\nE       assert 404 in [200, 201]\nE        +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/integration/test_complete_flow.py:415: AssertionError\n&#34;}], &#34;tests/integration/test_complete_flow.py::TestSystemRecoveryScenarios::test_data_migration_compatibility&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/integration/test_complete_flow.py::TestSystemRecoveryScenarios::test_data_migration_compatibility&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/integration/test_complete_flow.py::TestSystemRecoveryScenarios::test_data_migration_compatibility&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_complete_flow.TestSystemRecoveryScenarios object at 0x10f17dd10&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.integration\n    def test_data_migration_compatibility(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa compatibilidade com migra\u00e7\u00e3o de dados&amp;quot;&amp;quot;&amp;quot;\n        # Simular dados em formato antigo\n        legacy_data = {\n            &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_LEGACY_001&amp;#x27;,\n            &amp;#x27;serial_number&amp;#x27;: &amp;#x27;SN_LEGACY_001&amp;#x27;,\n            &amp;#x27;user_id&amp;#x27;: &amp;#x27;USER_LEGACY&amp;#x27;,\n            &amp;#x27;legacy_format&amp;#x27;: True,\n            &amp;#x27;version&amp;#x27;: &amp;#x27;1.0&amp;#x27;\n        }\n    \n        # Tentar upload com dados legacy\n        file_data = BytesIO(b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + b&amp;#x27;legacy_test&amp;#x27; * 50)\n        upload_response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n            **legacy_data,\n            &amp;#x27;file&amp;#x27;: (file_data, &amp;#x27;comprovante_legacy.png&amp;#x27;)\n        })\n    \n        # Sistema deveria lidar com formato legacy ou converter\n&amp;gt;       assert upload_response.status_code in [200, 201, 202], &amp;quot;Sistema deveria aceitar ou converter dados legacy&amp;quot;\nE       AssertionError: Sistema deveria aceitar ou converter dados legacy\nE       assert 404 in [200, 201, 202]\nE        +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/integration/test_complete_flow.py:467: AssertionError\n&#34;}], &#34;tests/integration/test_complete_flow.py::TestSystemRecoveryScenarios::test_backup_and_restore_flow&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/integration/test_complete_flow.py::TestSystemRecoveryScenarios::test_backup_and_restore_flow&#34;, &#34;duration&#34;: &#34;5 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/integration/test_complete_flow.py::TestSystemRecoveryScenarios::test_backup_and_restore_flow&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;5 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_complete_flow.TestSystemRecoveryScenarios object at 0x10f1d49d0&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\ntmp_path = PosixPath(&amp;#x27;/private/var/folders/w5/2tjb6m2n29qg4gnx1svlzc5m0000gn/T/pytest-of-henrique/pytest-0/test_backup_and_restore_flow0&amp;#x27;)\n\n    @pytest.mark.integration\n    def test_backup_and_restore_flow(self, client, tmp_path):\n        &amp;quot;&amp;quot;&amp;quot;Testa fluxo de backup e restaura\u00e7\u00e3o&amp;quot;&amp;quot;&amp;quot;\n        # Criar dados para backup\n        test_data = {\n            &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_BACKUP_001&amp;#x27;,\n            &amp;#x27;serial_number&amp;#x27;: &amp;#x27;SN_BACKUP_001&amp;#x27;,\n            &amp;#x27;user_id&amp;#x27;: &amp;#x27;USER_BACKUP&amp;#x27;\n        }\n    \n        # Upload inicial\n        file_data = BytesIO(b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + b&amp;#x27;backup_test&amp;#x27; * 50)\n        upload_response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n            **test_data,\n            &amp;#x27;file&amp;#x27;: (file_data, &amp;#x27;comprovante_backup.png&amp;#x27;)\n        })\n    \n&amp;gt;       assert upload_response.status_code in [200, 201]\nE       assert 404 in [200, 201]\nE        +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/integration/test_complete_flow.py:497: AssertionError\n&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_maximum_file_size_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_maximum_file_size_handling&#34;, &#34;duration&#34;: &#34;21 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_maximum_file_size_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;21 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_extreme_scenarios.TestExtremeFileScenarios object at 0x10f17d1d0&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.extreme\n    def test_maximum_file_size_handling(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa manipula\u00e7\u00e3o de arquivos no limite m\u00e1ximo de tamanho&amp;quot;&amp;quot;&amp;quot;\n        # Configurar limite m\u00e1ximo (ex: 10MB)\n        max_size = 10 * 1024 * 1024  # 10MB\n    \n        # Criar arquivo no limite exato\n        def create_file_at_limit(size_bytes):\n            content = b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27;  # Header PNG\n            content += b&amp;#x27;\\x00&amp;#x27; * (size_bytes - len(content))  # Preencher com zeros\n            return BytesIO(content)\n    \n        # Testar arquivo no limite exato\n        file_at_limit = create_file_at_limit(max_size)\n    \n        response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n            &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_LIMIT_TEST&amp;#x27;,\n            &amp;#x27;serial_number&amp;#x27;: &amp;#x27;SN_LIMIT&amp;#x27;,\n            &amp;#x27;file&amp;#x27;: (file_at_limit, &amp;#x27;comprovante_limite.png&amp;#x27;)\n        })\n    \n        # Arquivo no limite deveria ser aceito\n&amp;gt;       assert response.status_code in [200, 201], &amp;quot;Arquivo no limite deveria ser aceito&amp;quot;\nE       AssertionError: Arquivo no limite deveria ser aceito\nE       assert 404 in [200, 201]\nE        +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/unit/test_extreme_scenarios.py:50: AssertionError\n&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_corrupted_file_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_corrupted_file_handling&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_corrupted_file_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_extreme_scenarios.TestExtremeFileScenarios object at 0x10f17e0d0&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.extreme\n    def test_corrupted_file_handling(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa manipula\u00e7\u00e3o de arquivos corrompidos&amp;quot;&amp;quot;&amp;quot;\n        # Cen\u00e1rios de corrup\u00e7\u00e3o\n        corruption_scenarios = [\n            {\n                &amp;#x27;name&amp;#x27;: &amp;#x27;header_corrupted&amp;#x27;,\n                &amp;#x27;content&amp;#x27;: b&amp;#x27;\\x00\\x00\\x00\\x00&amp;#x27; + b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + b&amp;#x27;\\x00&amp;#x27; * 1000,\n                &amp;#x27;description&amp;#x27;: &amp;#x27;Header PNG corrompido&amp;#x27;\n            },\n            {\n                &amp;#x27;name&amp;#x27;: &amp;#x27;truncated_file&amp;#x27;,\n                &amp;#x27;content&amp;#x27;: b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n\\x00\\x00\\x00\\r&amp;#x27;,  # Arquivo truncado\n                &amp;#x27;description&amp;#x27;: &amp;#x27;Arquivo truncado&amp;#x27;\n            },\n            {\n                &amp;#x27;name&amp;#x27;: &amp;#x27;invalid_chunks&amp;#x27;,\n                &amp;#x27;content&amp;#x27;: b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + b&amp;#x27;\\xFF&amp;#x27; * 100,  # Chunks inv\u00e1lidos\n                &amp;#x27;description&amp;#x27;: &amp;#x27;Chunks PNG inv\u00e1lidos&amp;#x27;\n            },\n            {\n                &amp;#x27;name&amp;#x27;: &amp;#x27;mixed_format&amp;#x27;,\n                &amp;#x27;content&amp;#x27;: b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + b&amp;#x27;\\xFF\\xD8\\xFF\\xE0&amp;#x27;,  # PNG + JPEG headers\n                &amp;#x27;description&amp;#x27;: &amp;#x27;Mistura de formatos&amp;#x27;\n            }\n        ]\n    \n        for scenario in corruption_scenarios:\n            file_data = BytesIO(scenario[&amp;#x27;content&amp;#x27;])\n    \n            response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n                &amp;#x27;payment_id&amp;#x27;: f&amp;quot;PAY_CORRUPT_{scenario[&amp;#x27;name&amp;#x27;].upper()}&amp;quot;,\n                &amp;#x27;serial_number&amp;#x27;: f&amp;quot;SN_CORRUPT_{scenario[&amp;#x27;name&amp;#x27;].upper()}&amp;quot;,\n                &amp;#x27;file&amp;#x27;: (file_data, f&amp;quot;corrupted_{scenario[&amp;#x27;name&amp;#x27;]}.png&amp;quot;)\n            })\n    \n            # Arquivos corrompidos deveriam ser rejeitados\n&amp;gt;           assert response.status_code in [400, 422], f&amp;quot;Arquivo corrompido ({scenario[&amp;#x27;description&amp;#x27;]}) deveria ser rejeitado&amp;quot;\nE           AssertionError: Arquivo corrompido (Header PNG corrompido) deveria ser rejeitado\nE           assert 404 in [400, 422]\nE            +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/unit/test_extreme_scenarios.py:101: AssertionError\n&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_simultaneous_uploads_same_payment&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_simultaneous_uploads_same_payment&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_simultaneous_uploads_same_payment&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n&amp;gt;               self.app.do_teardown_request(exc)\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:401: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py:2035: in do_teardown_request\n    for name in chain(request.blueprints, (None,)):\n                      ^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:311: in __get__\n    obj = instance._get_current_object()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    def _get_current_object() -&amp;gt; T:\n        try:\n            obj = local.get()\n        except LookupError:\n&amp;gt;           raise RuntimeError(unbound_message) from None\nE           RuntimeError: Working outside of request context.\nE           \nE           This typically means that you attempted to use functionality that needed\nE           an active HTTP request. Consult the documentation on testing for\nE           information about how to avoid this problem.\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:508: RuntimeError\n\nDuring handling of the above exception, another exception occurred:\n\nself = &amp;lt;test_extreme_scenarios.TestExtremeFileScenarios object at 0x10f1d4fc0&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.extreme\n    def test_simultaneous_uploads_same_payment(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa uploads simult\u00e2neos para o mesmo pagamento&amp;quot;&amp;quot;&amp;quot;\n        payment_id = &amp;#x27;PAY_CONCURRENT_TEST&amp;#x27;\n        serial_number = &amp;#x27;SN_CONCURRENT&amp;#x27;\n    \n        # Criar m\u00faltiplos arquivos\n        def create_test_file(index):\n            content = b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + f&amp;#x27;file_{index}&amp;#x27;.encode() * 100\n            return BytesIO(content)\n    \n        # Fun\u00e7\u00e3o para upload\n        def upload_file(index):\n            file_data = create_test_file(index)\n            response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n                &amp;#x27;payment_id&amp;#x27;: payment_id,\n                &amp;#x27;serial_number&amp;#x27;: serial_number,\n                &amp;#x27;file&amp;#x27;: (file_data, f&amp;#x27;comprovante_{index}.png&amp;#x27;)\n            })\n            return {\n                &amp;#x27;index&amp;#x27;: index,\n                &amp;#x27;status_code&amp;#x27;: response.status_code,\n                &amp;#x27;response&amp;#x27;: response.get_json() if response.content_type == &amp;#x27;application/json&amp;#x27; else None\n            }\n    \n        # Executar uploads simult\u00e2neos\n        num_threads = 5\n        results = []\n    \n        with ThreadPoolExecutor(max_workers=num_threads) as executor:\n            futures = [executor.submit(upload_file, i) for i in range(num_threads)]\n    \n            for future in as_completed(futures):\n&amp;gt;               results.append(future.result())\n                               ^^^^^^^^^^^^^^^\n\ntests/unit/test_extreme_scenarios.py:141: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/_base.py:449: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py:59: in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/unit/test_extreme_scenarios.py:122: in upload_file\n    response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/test.py:1248: in post\n    return self.open(*args, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/testing.py:230: in open\n    self._context_stack.close()\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:627: in close\n    self.__exit__(None, None, None)\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:619: in __exit__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:604: in __exit__\n    if cb(*exc_details):\n       ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:434: in __exit__\n    self.pop(exc_value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n                self.app.do_teardown_request(exc)\n    \n                request_close = getattr(self.request, &amp;quot;close&amp;quot;, None)\n                if request_close is not None:\n                    request_close()\n        finally:\n&amp;gt;           ctx = _cv_request.get()\n                  ^^^^^^^^^^^^^^^^^\nE           LookupError: &amp;lt;ContextVar name=&amp;#x27;flask.request_ctx&amp;#x27; at 0x10fdad5d0&amp;gt;\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:407: LookupError\n&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_storage_space_exhaustion&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_storage_space_exhaustion&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestExtremeFileScenarios::test_storage_space_exhaustion&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_extreme_scenarios.TestExtremeFileScenarios object at 0x10f1d4d60&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\ntmp_path = PosixPath(&amp;#x27;/private/var/folders/w5/2tjb6m2n29qg4gnx1svlzc5m0000gn/T/pytest-of-henrique/pytest-0/test_storage_space_exhaustion0&amp;#x27;)\n\n    @pytest.mark.extreme\n    def test_storage_space_exhaustion(self, client, tmp_path):\n        &amp;quot;&amp;quot;&amp;quot;Testa comportamento quando espa\u00e7o de armazenamento se esgota&amp;quot;&amp;quot;&amp;quot;\n        # Simular diret\u00f3rio com pouco espa\u00e7o\n        limited_storage_dir = tmp_path / &amp;quot;limited_storage&amp;quot;\n        limited_storage_dir.mkdir()\n    \n        # Mock para simular erro de espa\u00e7o em disco\n        original_open = open\n    \n        def mock_open_with_disk_full(*args, **kwargs):\n            if str(limited_storage_dir) in str(args[0]):\n                raise OSError(28, &amp;quot;No space left on device&amp;quot;)\n            return original_open(*args, **kwargs)\n    \n        with patch(&amp;#x27;builtins.open&amp;#x27;, side_effect=mock_open_with_disk_full):\n            # Tentar upload\n            file_data = BytesIO(b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + b&amp;#x27;\\x00&amp;#x27; * 1000)\n    \n            response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n                &amp;#x27;payment_id&amp;#x27;: &amp;#x27;PAY_DISK_FULL&amp;#x27;,\n                &amp;#x27;serial_number&amp;#x27;: &amp;#x27;SN_DISK_FULL&amp;#x27;,\n                &amp;#x27;file&amp;#x27;: (file_data, &amp;#x27;comprovante_disk_full.png&amp;#x27;)\n            })\n    \n            # Deveria retornar erro de servidor\n&amp;gt;           assert response.status_code == 507, &amp;quot;Deveria retornar erro de espa\u00e7o insuficiente&amp;quot;\nE           AssertionError: Deveria retornar erro de espa\u00e7o insuficiente\nE           assert 404 == 507\nE            +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/unit/test_extreme_scenarios.py:180: AssertionError\n&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_high_volume_concurrent_uploads&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_high_volume_concurrent_uploads&#34;, &#34;duration&#34;: &#34;32 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_high_volume_concurrent_uploads&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;32 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_extreme_scenarios.TestConcurrencyAndPerformance object at 0x10f17e210&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.extreme\n    @pytest.mark.slow\n    def test_high_volume_concurrent_uploads(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa alto volume de uploads concorrentes&amp;quot;&amp;quot;&amp;quot;\n        num_uploads = 50\n        max_workers = 10\n    \n        # Fun\u00e7\u00e3o para upload individual\n        def perform_upload(upload_id):\n            start_time = time.time()\n    \n            file_data = BytesIO(b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + f&amp;#x27;upload_{upload_id}&amp;#x27;.encode() * 100)\n    \n            response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n                &amp;#x27;payment_id&amp;#x27;: f&amp;#x27;PAY_VOLUME_{upload_id}&amp;#x27;,\n                &amp;#x27;serial_number&amp;#x27;: f&amp;#x27;SN_VOLUME_{upload_id}&amp;#x27;,\n                &amp;#x27;file&amp;#x27;: (file_data, f&amp;#x27;comprovante_volume_{upload_id}.png&amp;#x27;)\n            })\n    \n            end_time = time.time()\n    \n            return {\n                &amp;#x27;upload_id&amp;#x27;: upload_id,\n                &amp;#x27;status_code&amp;#x27;: response.status_code,\n                &amp;#x27;response_time&amp;#x27;: end_time - start_time,\n                &amp;#x27;success&amp;#x27;: response.status_code in [200, 201]\n            }\n    \n        # Executar uploads concorrentes\n        start_time = time.time()\n        results = []\n    \n        with ThreadPoolExecutor(max_workers=max_workers) as executor:\n            futures = [executor.submit(perform_upload, i) for i in range(num_uploads)]\n    \n            for future in as_completed(futures):\n&amp;gt;               results.append(future.result())\n                               ^^^^^^^^^^^^^^^\n\ntests/unit/test_extreme_scenarios.py:227: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/_base.py:449: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py:59: in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/unit/test_extreme_scenarios.py:204: in perform_upload\n    response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/test.py:1248: in post\n    return self.open(*args, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/testing.py:230: in open\n    self._context_stack.close()\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:627: in close\n    self.__exit__(None, None, None)\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:619: in __exit__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:604: in __exit__\n    if cb(*exc_details):\n       ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:434: in __exit__\n    self.pop(exc_value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = ValueError(&amp;quot;&amp;lt;Token var=&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt; at 0x10f3367c0&amp;gt; was created in a different Context&amp;quot;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n                self.app.do_teardown_request(exc)\n    \n                request_close = getattr(self.request, &amp;quot;close&amp;quot;, None)\n                if request_close is not None:\n                    request_close()\n        finally:\n            ctx = _cv_request.get()\n            token, app_ctx = self._cv_tokens.pop()\n&amp;gt;           _cv_request.reset(token)\nE           ValueError: &amp;lt;Token var=&amp;lt;ContextVar name=&amp;#x27;flask.request_ctx&amp;#x27; at 0x10fdad5d0&amp;gt; at 0x10f335480&amp;gt; was created in a different Context\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:409: ValueError\n&#34;}, {&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_high_volume_concurrent_uploads::teardown&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_high_volume_concurrent_uploads::teardown&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n&amp;gt;               self.app.do_teardown_request(exc)\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:401: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py:2035: in do_teardown_request\n    for name in chain(request.blueprints, (None,)):\n                      ^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:311: in __get__\n    obj = instance._get_current_object()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    def _get_current_object() -&amp;gt; T:\n        try:\n            obj = local.get()\n        except LookupError:\n&amp;gt;           raise RuntimeError(unbound_message) from None\nE           RuntimeError: Working outside of request context.\nE           \nE           This typically means that you attempted to use functionality that needed\nE           an active HTTP request. Consult the documentation on testing for\nE           information about how to avoid this problem.\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:508: RuntimeError\n\nDuring handling of the above exception, another exception occurred:\n\nflask_app = &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;\n\n    @pytest.fixture\n    def client(flask_app):\n        &amp;quot;&amp;quot;&amp;quot;Cliente de teste Flask&amp;quot;&amp;quot;&amp;quot;\n&amp;gt;       with flask_app.test_client() as client:\n             ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests/conftest.py:77: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/testing.py:259: in __exit__\n    self._context_stack.close()\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:627: in close\n    self.__exit__(None, None, None)\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:619: in __exit__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:604: in __exit__\n    if cb(*exc_details):\n       ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:434: in __exit__\n    self.pop(exc_value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n                self.app.do_teardown_request(exc)\n    \n                request_close = getattr(self.request, &amp;quot;close&amp;quot;, None)\n                if request_close is not None:\n                    request_close()\n        finally:\n&amp;gt;           ctx = _cv_request.get()\n                  ^^^^^^^^^^^^^^^^^\nE           LookupError: &amp;lt;ContextVar name=&amp;#x27;flask.request_ctx&amp;#x27; at 0x10fdad5d0&amp;gt;\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:407: LookupError\n&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_memory_usage_large_files&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_memory_usage_large_files&#34;, &#34;duration&#34;: &#34;134 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_memory_usage_large_files&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;134 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_database_connection_exhaustion&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_database_connection_exhaustion&#34;, &#34;duration&#34;: &#34;210 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestConcurrencyAndPerformance::test_database_connection_exhaustion&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;210 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n&amp;gt;               self.app.do_teardown_request(exc)\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:401: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py:2035: in do_teardown_request\n    for name in chain(request.blueprints, (None,)):\n                      ^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:311: in __get__\n    obj = instance._get_current_object()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    def _get_current_object() -&amp;gt; T:\n        try:\n            obj = local.get()\n        except LookupError:\n&amp;gt;           raise RuntimeError(unbound_message) from None\nE           RuntimeError: Working outside of request context.\nE           \nE           This typically means that you attempted to use functionality that needed\nE           an active HTTP request. Consult the documentation on testing for\nE           information about how to avoid this problem.\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:508: RuntimeError\n\nDuring handling of the above exception, another exception occurred:\n\nself = &amp;lt;test_extreme_scenarios.TestConcurrencyAndPerformance object at 0x10f1d4c30&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.extreme\n    def test_database_connection_exhaustion(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa esgotamento de conex\u00f5es de banco de dados&amp;quot;&amp;quot;&amp;quot;\n        # Simular m\u00faltiplas opera\u00e7\u00f5es simult\u00e2neas que usam BD\n        def database_intensive_operation(operation_id):\n            # Simular opera\u00e7\u00e3o que mant\u00e9m conex\u00e3o por tempo\n            time.sleep(0.1)  # Simular processamento\n    \n            response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n                &amp;#x27;payment_id&amp;#x27;: f&amp;#x27;PAY_DB_{operation_id}&amp;#x27;,\n                &amp;#x27;serial_number&amp;#x27;: f&amp;#x27;SN_DB_{operation_id}&amp;#x27;,\n                &amp;#x27;file&amp;#x27;: (BytesIO(b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + b&amp;#x27;\\x00&amp;#x27; * 1000), f&amp;#x27;test_{operation_id}.png&amp;#x27;)\n            })\n    \n            return {\n                &amp;#x27;operation_id&amp;#x27;: operation_id,\n                &amp;#x27;status_code&amp;#x27;: response.status_code,\n                &amp;#x27;success&amp;#x27;: response.status_code in [200, 201]\n            }\n    \n        # Executar muitas opera\u00e7\u00f5es simult\u00e2neas\n        num_operations = 20\n        max_workers = 15\n    \n        results = []\n        with ThreadPoolExecutor(max_workers=max_workers) as executor:\n            futures = [executor.submit(database_intensive_operation, i) for i in range(num_operations)]\n    \n            for future in as_completed(futures):\n&amp;gt;               results.append(future.result())\n                               ^^^^^^^^^^^^^^^\n\ntests/unit/test_extreme_scenarios.py:315: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/_base.py:449: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py:59: in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/unit/test_extreme_scenarios.py:294: in database_intensive_operation\n    response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/test.py:1248: in post\n    return self.open(*args, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/testing.py:230: in open\n    self._context_stack.close()\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:627: in close\n    self.__exit__(None, None, None)\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:619: in __exit__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:604: in __exit__\n    if cb(*exc_details):\n       ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:434: in __exit__\n    self.pop(exc_value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n                self.app.do_teardown_request(exc)\n    \n                request_close = getattr(self.request, &amp;quot;close&amp;quot;, None)\n                if request_close is not None:\n                    request_close()\n        finally:\n&amp;gt;           ctx = _cv_request.get()\n                  ^^^^^^^^^^^^^^^^^\nE           LookupError: &amp;lt;ContextVar name=&amp;#x27;flask.request_ctx&amp;#x27; at 0x10fdad5d0&amp;gt;\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:407: LookupError\n&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_partial_file_upload_recovery&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_partial_file_upload_recovery&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_partial_file_upload_recovery&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_database_rollback_on_failure&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_database_rollback_on_failure&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_database_rollback_on_failure&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_service_degradation_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_service_degradation_handling&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_service_degradation_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_extreme_scenarios.TestErrorRecoveryScenarios object at 0x10f1d4180&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.extreme\n    def test_service_degradation_handling(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa comportamento durante degrada\u00e7\u00e3o de servi\u00e7os&amp;quot;&amp;quot;&amp;quot;\n        # Simular diferentes n\u00edveis de degrada\u00e7\u00e3o\n        degradation_scenarios = [\n            {\n                &amp;#x27;name&amp;#x27;: &amp;#x27;slow_database&amp;#x27;,\n                &amp;#x27;delay&amp;#x27;: 2.0,\n                &amp;#x27;expected_behavior&amp;#x27;: &amp;#x27;timeout_or_success&amp;#x27;\n            },\n            {\n                &amp;#x27;name&amp;#x27;: &amp;#x27;intermittent_storage&amp;#x27;,\n                &amp;#x27;failure_rate&amp;#x27;: 0.5,\n                &amp;#x27;expected_behavior&amp;#x27;: &amp;#x27;retry_or_fail&amp;#x27;\n            },\n            {\n                &amp;#x27;name&amp;#x27;: &amp;#x27;email_service_down&amp;#x27;,\n                &amp;#x27;service&amp;#x27;: &amp;#x27;email&amp;#x27;,\n                &amp;#x27;expected_behavior&amp;#x27;: &amp;#x27;fallback_notification&amp;#x27;\n            }\n        ]\n    \n        for scenario in degradation_scenarios:\n            if scenario[&amp;#x27;name&amp;#x27;] == &amp;#x27;slow_database&amp;#x27;:\n                # Simular banco lento\n                with patch(&amp;#x27;time.sleep&amp;#x27;) as mock_sleep:\n                    mock_sleep.side_effect = lambda x: time.sleep(min(x, 0.1))  # Acelerar para teste\n    \n                    start_time = time.time()\n    \n                    file_data = BytesIO(b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + b&amp;#x27;\\x00&amp;#x27; * 1000)\n                    response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n                        &amp;#x27;payment_id&amp;#x27;: f&amp;#x27;PAY_SLOW_{scenario[&amp;quot;name&amp;quot;].upper()}&amp;#x27;,\n                        &amp;#x27;serial_number&amp;#x27;: f&amp;#x27;SN_SLOW_{scenario[&amp;quot;name&amp;quot;].upper()}&amp;#x27;,\n                        &amp;#x27;file&amp;#x27;: (file_data, f&amp;#x27;test_{scenario[&amp;quot;name&amp;quot;]}.png&amp;#x27;)\n                    })\n    \n                    response_time = time.time() - start_time\n    \n                    # Sistema deveria ter timeout ou sucesso, mas n\u00e3o travar\n                    assert response_time &amp;lt;= 10.0, &amp;quot;Resposta n\u00e3o deveria demorar mais que 10s&amp;quot;\n&amp;gt;                   assert response.status_code in [200, 201, 408, 500], &amp;quot;Status deveria indicar sucesso ou timeout&amp;quot;\nE                   AssertionError: Status deveria indicar sucesso ou timeout\nE                   assert 404 in [200, 201, 408, 500]\nE                    +  where 404 = &amp;lt;WrapperTestResponse streamed [404 NOT FOUND]&amp;gt;.status_code\n\ntests/unit/test_extreme_scenarios.py:434: AssertionError\n&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_cascading_failure_prevention&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_cascading_failure_prevention&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestErrorRecoveryScenarios::test_cascading_failure_prevention&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_extreme_scenarios.TestErrorRecoveryScenarios object at 0x10f1d5480&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.extreme\n    def test_cascading_failure_prevention(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa preven\u00e7\u00e3o de falhas em cascata&amp;quot;&amp;quot;&amp;quot;\n        # Simular falha em um componente\n        failure_count = 0\n        max_failures = 3\n    \n        def failing_service_mock(*args, **kwargs):\n            nonlocal failure_count\n            failure_count += 1\n    \n            if failure_count &amp;lt;= max_failures:\n                raise Exception(f&amp;quot;Service failure #{failure_count}&amp;quot;)\n    \n            # Ap\u00f3s max_failures, simular recupera\u00e7\u00e3o\n            return True\n    \n        # Testar circuit breaker pattern\n        circuit_breaker_state = {\n            &amp;#x27;failures&amp;#x27;: 0,\n            &amp;#x27;last_failure&amp;#x27;: None,\n            &amp;#x27;state&amp;#x27;: &amp;#x27;closed&amp;#x27;  # closed, open, half_open\n        }\n    \n        def circuit_breaker_call(service_func, *args, **kwargs):\n            current_time = datetime.now()\n    \n            # Verificar estado do circuit breaker\n            if circuit_breaker_state[&amp;#x27;state&amp;#x27;] == &amp;#x27;open&amp;#x27;:\n                # Verificar se \u00e9 hora de tentar novamente\n                if (circuit_breaker_state[&amp;#x27;last_failure&amp;#x27;] and\n                    current_time - circuit_breaker_state[&amp;#x27;last_failure&amp;#x27;] &amp;gt; timedelta(seconds=30)):\n                    circuit_breaker_state[&amp;#x27;state&amp;#x27;] = &amp;#x27;half_open&amp;#x27;\n                else:\n                    raise Exception(&amp;quot;Circuit breaker is open&amp;quot;)\n    \n            try:\n                result = service_func(*args, **kwargs)\n    \n                # Sucesso - resetar circuit breaker\n                if circuit_breaker_state[&amp;#x27;state&amp;#x27;] == &amp;#x27;half_open&amp;#x27;:\n                    circuit_breaker_state[&amp;#x27;state&amp;#x27;] = &amp;#x27;closed&amp;#x27;\n                    circuit_breaker_state[&amp;#x27;failures&amp;#x27;] = 0\n    \n                return result\n    \n            except Exception as e:\n                circuit_breaker_state[&amp;#x27;failures&amp;#x27;] += 1\n                circuit_breaker_state[&amp;#x27;last_failure&amp;#x27;] = current_time\n    \n                # Abrir circuit breaker ap\u00f3s muitas falhas\n                if circuit_breaker_state[&amp;#x27;failures&amp;#x27;] &amp;gt;= 3:\n                    circuit_breaker_state[&amp;#x27;state&amp;#x27;] = &amp;#x27;open&amp;#x27;\n    \n                raise e\n    \n        # Testar m\u00faltiplas chamadas\n        results = []\n    \n        for i in range(10):\n            try:\n                result = circuit_breaker_call(failing_service_mock)\n                results.append({&amp;#x27;attempt&amp;#x27;: i, &amp;#x27;success&amp;#x27;: True, &amp;#x27;result&amp;#x27;: result})\n            except Exception as e:\n                results.append({&amp;#x27;attempt&amp;#x27;: i, &amp;#x27;success&amp;#x27;: False, &amp;#x27;error&amp;#x27;: str(e)})\n    \n        # Verificar que circuit breaker funcionou\n        failures = [r for r in results if not r[&amp;#x27;success&amp;#x27;]]\n        circuit_breaker_activations = [r for r in failures if &amp;#x27;circuit breaker&amp;#x27; in r[&amp;#x27;error&amp;#x27;]]\n    \n&amp;gt;       assert len(circuit_breaker_activations) &amp;gt; 0, &amp;quot;Circuit breaker deveria ter sido ativado&amp;quot;\nE       AssertionError: Circuit breaker deveria ter sido ativado\nE       assert 0 &amp;gt; 0\nE        +  where 0 = len([])\n\ntests/unit/test_extreme_scenarios.py:506: AssertionError\n&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestDataIntegrityUnderStress::test_concurrent_payment_modifications&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestDataIntegrityUnderStress::test_concurrent_payment_modifications&#34;, &#34;duration&#34;: &#34;5 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestDataIntegrityUnderStress::test_concurrent_payment_modifications&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;5 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n&amp;gt;               self.app.do_teardown_request(exc)\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:401: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py:2035: in do_teardown_request\n    for name in chain(request.blueprints, (None,)):\n                      ^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:311: in __get__\n    obj = instance._get_current_object()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    def _get_current_object() -&amp;gt; T:\n        try:\n            obj = local.get()\n        except LookupError:\n&amp;gt;           raise RuntimeError(unbound_message) from None\nE           RuntimeError: Working outside of request context.\nE           \nE           This typically means that you attempted to use functionality that needed\nE           an active HTTP request. Consult the documentation on testing for\nE           information about how to avoid this problem.\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:508: RuntimeError\n\nDuring handling of the above exception, another exception occurred:\n\nself = &amp;lt;test_extreme_scenarios.TestDataIntegrityUnderStress object at 0x10f17e710&amp;gt;\nclient = &amp;lt;FlaskClient &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;&amp;gt;\n\n    @pytest.mark.extreme\n    def test_concurrent_payment_modifications(self, client):\n        &amp;quot;&amp;quot;&amp;quot;Testa modifica\u00e7\u00f5es concorrentes do mesmo pagamento&amp;quot;&amp;quot;&amp;quot;\n        payment_id = &amp;#x27;PAY_CONCURRENT_MOD&amp;#x27;\n    \n        # Fun\u00e7\u00e3o para modificar pagamento\n        def modify_payment(modification_id, action):\n            if action == &amp;#x27;upload&amp;#x27;:\n                file_data = BytesIO(b&amp;#x27;\\x89PNG\\r\\n\\x1a\\n&amp;#x27; + f&amp;#x27;mod_{modification_id}&amp;#x27;.encode() * 100)\n                response = client.post(&amp;#x27;/upload_receipt&amp;#x27;, data={\n                    &amp;#x27;payment_id&amp;#x27;: payment_id,\n                    &amp;#x27;serial_number&amp;#x27;: f&amp;#x27;SN_MOD_{modification_id}&amp;#x27;,\n                    &amp;#x27;file&amp;#x27;: (file_data, f&amp;#x27;mod_{modification_id}.png&amp;#x27;)\n                })\n            elif action == &amp;#x27;status_update&amp;#x27;:\n                response = client.put(f&amp;#x27;/payment/{payment_id}/status&amp;#x27;,\n                                    json={&amp;#x27;status&amp;#x27;: f&amp;#x27;updated_by_{modification_id}&amp;#x27;})\n            elif action == &amp;#x27;verification&amp;#x27;:\n                response = client.post(f&amp;#x27;/payment/{payment_id}/verify&amp;#x27;,\n                                     json={&amp;#x27;verified_by&amp;#x27;: f&amp;#x27;user_{modification_id}&amp;#x27;})\n    \n            return {\n                &amp;#x27;modification_id&amp;#x27;: modification_id,\n                &amp;#x27;action&amp;#x27;: action,\n                &amp;#x27;status_code&amp;#x27;: response.status_code,\n                &amp;#x27;success&amp;#x27;: response.status_code in [200, 201, 202]\n            }\n    \n        # Executar modifica\u00e7\u00f5es concorrentes\n        modifications = [\n            (&amp;#x27;upload&amp;#x27;, 1), (&amp;#x27;status_update&amp;#x27;, 2), (&amp;#x27;verification&amp;#x27;, 3),\n            (&amp;#x27;upload&amp;#x27;, 4), (&amp;#x27;status_update&amp;#x27;, 5)\n        ]\n    \n        results = []\n        with ThreadPoolExecutor(max_workers=5) as executor:\n            futures = [executor.submit(modify_payment, mod_id, action)\n                      for action, mod_id in modifications]\n    \n            for future in as_completed(futures):\n&amp;gt;               results.append(future.result())\n                               ^^^^^^^^^^^^^^^\n\ntests/unit/test_extreme_scenarios.py:556: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/_base.py:449: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py:59: in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/unit/test_extreme_scenarios.py:534: in modify_payment\n    response = client.post(f&amp;#x27;/payment/{payment_id}/verify&amp;#x27;,\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/test.py:1248: in post\n    return self.open(*args, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/testing.py:230: in open\n    self._context_stack.close()\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:627: in close\n    self.__exit__(None, None, None)\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:619: in __exit__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:604: in __exit__\n    if cb(*exc_details):\n       ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:434: in __exit__\n    self.pop(exc_value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = &amp;lt;RequestContext &amp;#x27;http://localhost/upload_receipt&amp;#x27; [POST] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n                self.app.do_teardown_request(exc)\n    \n                request_close = getattr(self.request, &amp;quot;close&amp;quot;, None)\n                if request_close is not None:\n                    request_close()\n        finally:\n&amp;gt;           ctx = _cv_request.get()\n                  ^^^^^^^^^^^^^^^^^\nE           LookupError: &amp;lt;ContextVar name=&amp;#x27;flask.request_ctx&amp;#x27; at 0x10fdad5d0&amp;gt;\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:407: LookupError\n&#34;}, {&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestDataIntegrityUnderStress::test_concurrent_payment_modifications::teardown&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestDataIntegrityUnderStress::test_concurrent_payment_modifications::teardown&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;RequestContext &amp;#x27;http://localhost/payment/PAY_CONCURRENT_MOD/status&amp;#x27; [PUT] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n&amp;gt;               self.app.do_teardown_request(exc)\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:401: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py:2035: in do_teardown_request\n    for name in chain(request.blueprints, (None,)):\n                      ^^^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:311: in __get__\n    obj = instance._get_current_object()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    def _get_current_object() -&amp;gt; T:\n        try:\n            obj = local.get()\n        except LookupError:\n&amp;gt;           raise RuntimeError(unbound_message) from None\nE           RuntimeError: Working outside of request context.\nE           \nE           This typically means that you attempted to use functionality that needed\nE           an active HTTP request. Consult the documentation on testing for\nE           information about how to avoid this problem.\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/werkzeug/local.py:508: RuntimeError\n\nDuring handling of the above exception, another exception occurred:\n\nflask_app = &amp;lt;Flask &amp;#x27;payment_api&amp;#x27;&amp;gt;\n\n    @pytest.fixture\n    def client(flask_app):\n        &amp;quot;&amp;quot;&amp;quot;Cliente de teste Flask&amp;quot;&amp;quot;&amp;quot;\n&amp;gt;       with flask_app.test_client() as client:\n             ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests/conftest.py:77: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/testing.py:259: in __exit__\n    self._context_stack.close()\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:627: in close\n    self.__exit__(None, None, None)\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:619: in __exit__\n    raise exc\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:604: in __exit__\n    if cb(*exc_details):\n       ^^^^^^^^^^^^^^^^\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:434: in __exit__\n    self.pop(exc_value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = &amp;lt;RequestContext &amp;#x27;http://localhost/payment/PAY_CONCURRENT_MOD/status&amp;#x27; [PUT] of payment_api&amp;gt;\nexc = LookupError(&amp;lt;ContextVar name=&amp;#x27;flask.app_ctx&amp;#x27; at 0x10fdad580&amp;gt;)\n\n    def pop(self, exc: BaseException | None = _sentinel) -&amp;gt; None:  # type: ignore\n        &amp;quot;&amp;quot;&amp;quot;Pops the request context and unbinds it by doing that.  This will\n        also trigger the execution of functions registered by the\n        :meth:`~flask.Flask.teardown_request` decorator.\n    \n        .. versionchanged:: 0.9\n           Added the `exc` argument.\n        &amp;quot;&amp;quot;&amp;quot;\n        clear_request = len(self._cv_tokens) == 1\n    \n        try:\n            if clear_request:\n                if exc is _sentinel:\n                    exc = sys.exc_info()[1]\n                self.app.do_teardown_request(exc)\n    \n                request_close = getattr(self.request, &amp;quot;close&amp;quot;, None)\n                if request_close is not None:\n                    request_close()\n        finally:\n&amp;gt;           ctx = _cv_request.get()\n                  ^^^^^^^^^^^^^^^^^\nE           LookupError: &amp;lt;ContextVar name=&amp;#x27;flask.request_ctx&amp;#x27; at 0x10fdad5d0&amp;gt;\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/ctx.py:407: LookupError\n&#34;}], &#34;tests/unit/test_extreme_scenarios.py::TestDataIntegrityUnderStress::test_data_consistency_after_interruption&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_extreme_scenarios.py::TestDataIntegrityUnderStress::test_data_consistency_after_interruption&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_extreme_scenarios.py::TestDataIntegrityUnderStress::test_data_consistency_after_interruption&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileStorage::test_upload_directory_creation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileStorage::test_upload_directory_creation&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileStorage::test_upload_directory_creation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileStorage::test_file_save_with_secure_filename&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileStorage::test_file_save_with_secure_filename&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileStorage::test_file_save_with_secure_filename&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileStorage::test_file_organization_by_date&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileStorage::test_file_organization_by_date&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileStorage::test_file_organization_by_date&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileStorage::test_duplicate_filename_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileStorage::test_duplicate_filename_handling&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileStorage::test_duplicate_filename_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileProcessing::test_image_metadata_extraction&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileProcessing::test_image_metadata_extraction&#34;, &#34;duration&#34;: &#34;24 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileProcessing::test_image_metadata_extraction&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;24 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileProcessing::test_file_size_calculation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileProcessing::test_file_size_calculation&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileProcessing::test_file_size_calculation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileProcessing::test_file_hash_generation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileProcessing::test_file_hash_generation&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileProcessing::test_file_hash_generation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileProcessing::test_image_thumbnail_generation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileProcessing::test_image_thumbnail_generation&#34;, &#34;duration&#34;: &#34;81 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileProcessing::test_image_thumbnail_generation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;81 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileBackupAndRecovery::test_automatic_backup_creation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileBackupAndRecovery::test_automatic_backup_creation&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileBackupAndRecovery::test_automatic_backup_creation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileBackupAndRecovery::test_backup_versioning&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileBackupAndRecovery::test_backup_versioning&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileBackupAndRecovery::test_backup_versioning&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileBackupAndRecovery::test_file_recovery_from_backup&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileBackupAndRecovery::test_file_recovery_from_backup&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileBackupAndRecovery::test_file_recovery_from_backup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_processing.py::TestFileMetadataStorage::test_metadata_json_creation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileMetadataStorage::test_metadata_json_creation::setup&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileMetadataStorage::test_metadata_json_creation::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_file_processing.py, line 435\n      @pytest.mark.processing\n      def test_metadata_json_creation(self, temp_upload_dir, create_test_file):\nE       fixture &amp;#x27;temp_upload_dir&amp;#x27; not found\n&amp;gt;       available fixtures: _session_faker, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, clean_payments_db, client, cov, create_test_file, create_test_image, doctest_namespace, extra, extras, faker, flask_app, include_metadata_in_junit_xml, invalid_file, large_image_file, metadata, mock_datetime, mock_email_service, mock_serial_generator, mock_uploads_dir, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, requests_mock, sample_payment, sample_payment_in_db, session_mocker, setup_test_environment, temp_dir, test_data_dir, test_fixtures_dir, test_helpers, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, upload_request_data, valid_image_file, worker_id\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_file_processing.py:435\n&#34;}], &#34;tests/unit/test_file_processing.py::TestFileMetadataStorage::test_metadata_search_and_retrieval&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileMetadataStorage::test_metadata_search_and_retrieval::setup&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileMetadataStorage::test_metadata_search_and_retrieval::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_file_processing.py, line 475\n      @pytest.mark.processing\n      def test_metadata_search_and_retrieval(self, temp_upload_dir):\nE       fixture &amp;#x27;temp_upload_dir&amp;#x27; not found\n&amp;gt;       available fixtures: _session_faker, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, clean_payments_db, client, cov, create_test_file, create_test_image, doctest_namespace, extra, extras, faker, flask_app, include_metadata_in_junit_xml, invalid_file, large_image_file, metadata, mock_datetime, mock_email_service, mock_serial_generator, mock_uploads_dir, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, requests_mock, sample_payment, sample_payment_in_db, session_mocker, setup_test_environment, temp_dir, test_data_dir, test_fixtures_dir, test_helpers, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, upload_request_data, valid_image_file, worker_id\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_file_processing.py:475\n&#34;}], &#34;tests/unit/test_file_processing.py::TestFileMetadataStorage::test_metadata_update_and_versioning&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_processing.py::TestFileMetadataStorage::test_metadata_update_and_versioning::setup&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_processing.py::TestFileMetadataStorage::test_metadata_update_and_versioning::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_file_processing.py, line 533\n      @pytest.mark.processing\n      def test_metadata_update_and_versioning(self, temp_upload_dir):\nE       fixture &amp;#x27;temp_upload_dir&amp;#x27; not found\n&amp;gt;       available fixtures: _session_faker, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, clean_payments_db, client, cov, create_test_file, create_test_image, doctest_namespace, extra, extras, faker, flask_app, include_metadata_in_junit_xml, invalid_file, large_image_file, metadata, mock_datetime, mock_email_service, mock_serial_generator, mock_uploads_dir, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, requests_mock, sample_payment, sample_payment_in_db, session_mocker, setup_test_environment, temp_dir, test_data_dir, test_fixtures_dir, test_helpers, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, upload_request_data, valid_image_file, worker_id\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_file_processing.py:533\n&#34;}], &#34;tests/unit/test_file_upload.py::TestFileUpload::test_allowed_file_valid_extensions&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileUpload::test_allowed_file_valid_extensions&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileUpload::test_allowed_file_valid_extensions&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileUpload::test_allowed_file_invalid_extensions&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileUpload::test_allowed_file_invalid_extensions&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileUpload::test_allowed_file_invalid_extensions&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_file_upload.TestFileUpload object at 0x10f17ec10&amp;gt;\n\n    @pytest.mark.upload\n    def test_allowed_file_invalid_extensions(self):\n        &amp;quot;&amp;quot;&amp;quot;Testa se extens\u00f5es inv\u00e1lidas s\u00e3o rejeitadas&amp;quot;&amp;quot;&amp;quot;\n        invalid_files = [\n            &amp;#x27;documento.txt&amp;#x27;,\n            &amp;#x27;planilha.xlsx&amp;#x27;,\n            &amp;#x27;apresentacao.pptx&amp;#x27;,\n            &amp;#x27;codigo.py&amp;#x27;,\n            &amp;#x27;arquivo.zip&amp;#x27;,\n            &amp;#x27;video.mp4&amp;#x27;,\n            &amp;#x27;audio.mp3&amp;#x27;,\n            &amp;#x27;comprovante&amp;#x27;,  # Sem extens\u00e3o\n            &amp;#x27;comprovante.&amp;#x27;,  # Extens\u00e3o vazia\n            &amp;#x27;.png&amp;#x27;,  # S\u00f3 extens\u00e3o\n            &amp;#x27;comprovante.exe&amp;#x27;\n        ]\n    \n        for filename in invalid_files:\n&amp;gt;           assert not allowed_file(filename), f&amp;quot;Arquivo {filename} deveria ser inv\u00e1lido&amp;quot;\nE           AssertionError: Arquivo .png deveria ser inv\u00e1lido\nE           assert not True\nE            +  where True = allowed_file(&amp;#x27;.png&amp;#x27;)\n\ntests/unit/test_file_upload.py:58: AssertionError\n&#34;}], &#34;tests/unit/test_file_upload.py::TestFileUpload::test_allowed_file_edge_cases&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileUpload::test_allowed_file_edge_cases&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileUpload::test_allowed_file_edge_cases&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileCreation::test_create_valid_png_file&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileCreation::test_create_valid_png_file&#34;, &#34;duration&#34;: &#34;14 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileCreation::test_create_valid_png_file&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;14 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileCreation::test_create_valid_jpg_file&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileCreation::test_create_valid_jpg_file&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileCreation::test_create_valid_jpg_file&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileCreation::test_create_large_file&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileCreation::test_create_large_file&#34;, &#34;duration&#34;: &#34;260 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileCreation::test_create_large_file&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;260 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_file_upload.TestFileCreation object at 0x10f1d62c0&amp;gt;\ncreate_test_image = &amp;lt;function create_test_image.&amp;lt;locals&amp;gt;._create_image at 0x10f92f600&amp;gt;\ncreate_test_file = &amp;lt;function create_test_file.&amp;lt;locals&amp;gt;._create_file at 0x10f92f920&amp;gt;\n\n    @pytest.mark.upload\n    def test_create_large_file(self, create_test_image, create_test_file):\n        &amp;quot;&amp;quot;&amp;quot;Testa cria\u00e7\u00e3o de arquivo grande&amp;quot;&amp;quot;&amp;quot;\n        # Criar imagem grande\n        image = create_test_image(width=3000, height=3000, format=&amp;#x27;PNG&amp;#x27;)\n    \n        img_bytes = BytesIO()\n        image.save(img_bytes, format=&amp;#x27;PNG&amp;#x27;)\n        img_bytes.seek(0)\n    \n        file_storage = create_test_file(\n            filename=&amp;#x27;large_test.png&amp;#x27;,\n            content=img_bytes.getvalue(),\n            content_type=&amp;#x27;image/png&amp;#x27;\n        )\n    \n        # Verificar se o arquivo \u00e9 realmente grande\n        file_size = len(file_storage.read())\n&amp;gt;       assert file_size &amp;gt; 1024 * 1024  # Maior que 1MB\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       assert 33247 &amp;gt; (1024 * 1024)\n\ntests/unit/test_file_upload.py:151: AssertionError\n&#34;}], &#34;tests/unit/test_file_upload.py::TestFileCreation::test_create_small_file&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileCreation::test_create_small_file&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileCreation::test_create_small_file&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileSizeValidation::test_file_size_within_limit&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileSizeValidation::test_file_size_within_limit&#34;, &#34;duration&#34;: &#34;33 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileSizeValidation::test_file_size_within_limit&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;33 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileSizeValidation::test_empty_file&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileSizeValidation::test_empty_file&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileSizeValidation::test_empty_file&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileSizeValidation::test_minimum_file_size&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileSizeValidation::test_minimum_file_size&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileSizeValidation::test_minimum_file_size&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileContentValidation::test_valid_image_content&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileContentValidation::test_valid_image_content&#34;, &#34;duration&#34;: &#34;16 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileContentValidation::test_valid_image_content&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;16 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileContentValidation::test_invalid_image_content&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileContentValidation::test_invalid_image_content&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileContentValidation::test_invalid_image_content&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileContentValidation::test_corrupted_image_content&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileContentValidation::test_corrupted_image_content&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileContentValidation::test_corrupted_image_content&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_success&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_success&#34;, &#34;duration&#34;: &#34;20 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_success&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;20 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_file_upload.TestFileStorageIntegration object at 0x10f17fed0&amp;gt;\nmock_uploads_dir = PosixPath(&amp;#x27;/var/folders/w5/2tjb6m2n29qg4gnx1svlzc5m0000gn/T/tmppbwobx5v/uploads&amp;#x27;)\nvalid_image_file = &amp;lt;FileStorage: &amp;#x27;comprovante_test.png&amp;#x27; (&amp;#x27;image/png&amp;#x27;)&amp;gt;\n\n    @pytest.mark.upload\n    @pytest.mark.integration\n    def test_save_payment_proof_success(self, mock_uploads_dir, valid_image_file):\n        &amp;quot;&amp;quot;&amp;quot;Testa salvamento bem-sucedido de comprovante&amp;quot;&amp;quot;&amp;quot;\n        payment_id = &amp;#x27;pix_20250101_120000_test&amp;#x27;\n    \n        # Salvar arquivo\n        result = save_payment_proof(valid_image_file, payment_id)\n    \n        # Verificar resultado\n        assert result is not None\n        assert result.endswith(&amp;#x27;.png&amp;#x27;)\n    \n        # Verificar se arquivo foi salvo\n        saved_file_path = mock_uploads_dir / result\n&amp;gt;       assert saved_file_path.exists()\nE       AssertionError: assert False\nE        +  where False = exists()\nE        +    where exists = PosixPath(&amp;#x27;/var/folders/w5/2tjb6m2n29qg4gnx1svlzc5m0000gn/T/tmppbwobx5v/uploads/pix_20250101_120000_test_comprovante_test.png&amp;#x27;).exists\n\ntests/unit/test_file_upload.py:307: AssertionError\n&#34;}], &#34;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_different_formats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_different_formats&#34;, &#34;duration&#34;: &#34;16 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_different_formats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;16 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_file_upload.TestFileStorageIntegration object at 0x10f204050&amp;gt;\nmock_uploads_dir = PosixPath(&amp;#x27;/var/folders/w5/2tjb6m2n29qg4gnx1svlzc5m0000gn/T/tmp25i954v3/uploads&amp;#x27;)\ncreate_test_image = &amp;lt;function create_test_image.&amp;lt;locals&amp;gt;._create_image at 0x10f91ce00&amp;gt;\ncreate_test_file = &amp;lt;function create_test_file.&amp;lt;locals&amp;gt;._create_file at 0x10f91cf40&amp;gt;\n\n    @pytest.mark.upload\n    @pytest.mark.integration\n    def test_save_payment_proof_different_formats(self, mock_uploads_dir, create_test_image, create_test_file):\n        &amp;quot;&amp;quot;&amp;quot;Testa salvamento de diferentes formatos de arquivo&amp;quot;&amp;quot;&amp;quot;\n        payment_id = &amp;#x27;pix_20250101_120000_test&amp;#x27;\n        formats = [\n            (&amp;#x27;test.png&amp;#x27;, &amp;#x27;PNG&amp;#x27;, &amp;#x27;image/png&amp;#x27;),\n            (&amp;#x27;test.jpg&amp;#x27;, &amp;#x27;JPEG&amp;#x27;, &amp;#x27;image/jpeg&amp;#x27;),\n            (&amp;#x27;test.jpeg&amp;#x27;, &amp;#x27;JPEG&amp;#x27;, &amp;#x27;image/jpeg&amp;#x27;),\n            (&amp;#x27;test.gif&amp;#x27;, &amp;#x27;GIF&amp;#x27;, &amp;#x27;image/gif&amp;#x27;)\n        ]\n    \n        for filename, img_format, content_type in formats:\n            # Criar imagem no formato espec\u00edfico\n            image = create_test_image(format=img_format)\n    \n            img_bytes = BytesIO()\n            image.save(img_bytes, format=img_format)\n            img_bytes.seek(0)\n    \n            file_storage = create_test_file(\n                filename=filename,\n                content=img_bytes.getvalue(),\n                content_type=content_type\n            )\n    \n            # Salvar arquivo\n            result = save_payment_proof(file_storage, f&amp;quot;{payment_id}_{img_format.lower()}&amp;quot;)\n    \n            # Verificar resultado\n            assert result is not None\n    \n            # Verificar se arquivo foi salvo\n            saved_file_path = mock_uploads_dir / result\n&amp;gt;           assert saved_file_path.exists()\nE           AssertionError: assert False\nE            +  where False = exists()\nE            +    where exists = PosixPath(&amp;#x27;/var/folders/w5/2tjb6m2n29qg4gnx1svlzc5m0000gn/T/tmp25i954v3/uploads/pix_20250101_120000_test_png_test.png&amp;#x27;).exists\n\ntests/unit/test_file_upload.py:344: AssertionError\n&#34;}], &#34;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_filename_sanitization&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_filename_sanitization&#34;, &#34;duration&#34;: &#34;20 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_filename_sanitization&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;20 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_file_upload.TestFileStorageIntegration object at 0x10f1d6780&amp;gt;\nmock_uploads_dir = PosixPath(&amp;#x27;/var/folders/w5/2tjb6m2n29qg4gnx1svlzc5m0000gn/T/tmp7z988_hm/uploads&amp;#x27;)\nvalid_image_file = &amp;lt;FileStorage: &amp;#x27;comprovante_test.png&amp;#x27; (&amp;#x27;image/png&amp;#x27;)&amp;gt;\n\n    @pytest.mark.upload\n    @pytest.mark.integration\n    def test_save_payment_proof_filename_sanitization(self, mock_uploads_dir, valid_image_file):\n        &amp;quot;&amp;quot;&amp;quot;Testa sanitiza\u00e7\u00e3o de nomes de arquivo&amp;quot;&amp;quot;&amp;quot;\n        payment_ids = [\n            &amp;#x27;pix_20250101_120000_test&amp;#x27;,\n            &amp;#x27;pix_20250101_120000_test_with_special_chars!@#&amp;#x27;,\n            &amp;#x27;pix/20250101\\\\120000\\test&amp;#x27;,\n            &amp;#x27;pix 20250101 120000 test with spaces&amp;#x27;\n        ]\n    \n        for payment_id in payment_ids:\n            # Reset file pointer\n            valid_image_file.seek(0)\n    \n            # Salvar arquivo\n            result = save_payment_proof(valid_image_file, payment_id)\n    \n            # Verificar que o resultado \u00e9 um nome de arquivo v\u00e1lido\n            assert result is not None\n            assert &amp;#x27;/&amp;#x27; not in result\n            assert &amp;#x27;\\\\&amp;#x27; not in result\n            assert result.endswith(&amp;#x27;.png&amp;#x27;)\n    \n            # Verificar se arquivo foi salvo\n            saved_file_path = mock_uploads_dir / result\n&amp;gt;           assert saved_file_path.exists()\nE           AssertionError: assert False\nE            +  where False = exists()\nE            +    where exists = PosixPath(&amp;#x27;/var/folders/w5/2tjb6m2n29qg4gnx1svlzc5m0000gn/T/tmp7z988_hm/uploads/pix_20250101_120000_test_comprovante_test.png&amp;#x27;).exists\n\ntests/unit/test_file_upload.py:373: AssertionError\n&#34;}], &#34;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_duplicate_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_duplicate_handling&#34;, &#34;duration&#34;: &#34;17 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_upload.py::TestFileStorageIntegration::test_save_payment_proof_duplicate_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;17 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_file_upload.TestFileStorageIntegration object at 0x10f1d68b0&amp;gt;\nmock_uploads_dir = PosixPath(&amp;#x27;/var/folders/w5/2tjb6m2n29qg4gnx1svlzc5m0000gn/T/tmpfhhjnb3k/uploads&amp;#x27;)\nvalid_image_file = &amp;lt;FileStorage: &amp;#x27;comprovante_test.png&amp;#x27; (&amp;#x27;image/png&amp;#x27;)&amp;gt;\n\n    @pytest.mark.upload\n    @pytest.mark.integration\n    def test_save_payment_proof_duplicate_handling(self, mock_uploads_dir, valid_image_file):\n        &amp;quot;&amp;quot;&amp;quot;Testa tratamento de arquivos duplicados&amp;quot;&amp;quot;&amp;quot;\n        payment_id = &amp;#x27;pix_20250101_120000_test&amp;#x27;\n    \n        # Salvar primeiro arquivo\n        valid_image_file.seek(0)\n        result1 = save_payment_proof(valid_image_file, payment_id)\n    \n        # Salvar segundo arquivo com mesmo payment_id\n        valid_image_file.seek(0)\n        result2 = save_payment_proof(valid_image_file, payment_id)\n    \n        # Verificar que ambos foram salvos (podem ter nomes diferentes)\n        assert result1 is not None\n        assert result2 is not None\n    \n        # Verificar se ambos arquivos existem\n        file1_path = mock_uploads_dir / result1\n        file2_path = mock_uploads_dir / result2\n    \n&amp;gt;       assert file1_path.exists()\nE       AssertionError: assert False\nE        +  where False = exists()\nE        +    where exists = PosixPath(&amp;#x27;/var/folders/w5/2tjb6m2n29qg4gnx1svlzc5m0000gn/T/tmpfhhjnb3k/uploads/pix_20250101_120000_test_comprovante_test.png&amp;#x27;).exists\n\ntests/unit/test_file_upload.py:397: AssertionError\n&#34;}], &#34;tests/unit/test_file_validation.py::TestFileFormatValidation::test_supported_image_formats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileFormatValidation::test_supported_image_formats&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileFormatValidation::test_supported_image_formats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileFormatValidation::test_supported_document_formats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileFormatValidation::test_supported_document_formats&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileFormatValidation::test_supported_document_formats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileFormatValidation::test_unsupported_formats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileFormatValidation::test_unsupported_formats&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileFormatValidation::test_unsupported_formats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileFormatValidation::test_case_insensitive_validation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileFormatValidation::test_case_insensitive_validation&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileFormatValidation::test_case_insensitive_validation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileSizeValidation::test_max_file_size_configuration&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileSizeValidation::test_max_file_size_configuration&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileSizeValidation::test_max_file_size_configuration&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileSizeValidation::test_file_size_categories&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileSizeValidation::test_file_size_categories&#34;, &#34;duration&#34;: &#34;15 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileSizeValidation::test_file_size_categories&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;15 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;test_file_validation.TestFileSizeValidation object at 0x10f204550&amp;gt;\ncreate_test_image = &amp;lt;function create_test_image.&amp;lt;locals&amp;gt;._create_image at 0x10f91e480&amp;gt;\ncreate_test_file = &amp;lt;function create_test_file.&amp;lt;locals&amp;gt;._create_file at 0x10f91e660&amp;gt;\n\n    @pytest.mark.validation\n    def test_file_size_categories(self, create_test_image, create_test_file):\n        &amp;quot;&amp;quot;&amp;quot;Testa diferentes categorias de tamanho de arquivo&amp;quot;&amp;quot;&amp;quot;\n        size_tests = [\n            # (width, height, expected_category, description)\n            (100, 100, &amp;#x27;small&amp;#x27;, &amp;#x27;Arquivo pequeno&amp;#x27;),\n            (800, 600, &amp;#x27;medium&amp;#x27;, &amp;#x27;Arquivo m\u00e9dio&amp;#x27;),\n            (1920, 1080, &amp;#x27;large&amp;#x27;, &amp;#x27;Arquivo grande&amp;#x27;),\n            (50, 50, &amp;#x27;tiny&amp;#x27;, &amp;#x27;Arquivo muito pequeno&amp;#x27;)\n        ]\n    \n        for width, height, category, description in size_tests:\n            # Criar imagem\n            image = create_test_image(width=width, height=height, format=&amp;#x27;PNG&amp;#x27;)\n    \n            # Converter para bytes\n            img_bytes = BytesIO()\n            image.save(img_bytes, format=&amp;#x27;PNG&amp;#x27;)\n            img_bytes.seek(0)\n    \n            # Criar FileStorage\n            file_storage = create_test_file(\n                filename=f&amp;#x27;test_{category}.png&amp;#x27;,\n                content=img_bytes.getvalue(),\n                content_type=&amp;#x27;image/png&amp;#x27;\n            )\n    \n            # Verificar tamanho\n            file_size = len(file_storage.read())\n            file_storage.seek(0)\n    \n            # Definir limites esperados\n            if category == &amp;#x27;tiny&amp;#x27;:\n                assert file_size &amp;lt; 10 * 1024, f&amp;quot;{description}: {file_size} bytes deveria ser &amp;lt; 10KB&amp;quot;\n            elif category == &amp;#x27;small&amp;#x27;:\n                assert file_size &amp;lt; 100 * 1024, f&amp;quot;{description}: {file_size} bytes deveria ser &amp;lt; 100KB&amp;quot;\n            elif category == &amp;#x27;medium&amp;#x27;:\n&amp;gt;               assert 100 * 1024 &amp;lt;= file_size &amp;lt; 2 * 1024 * 1024, f&amp;quot;{description}: {file_size} bytes deveria estar entre 100KB e 2MB&amp;quot;\nE               AssertionError: Arquivo m\u00e9dio: 2787 bytes deveria estar entre 100KB e 2MB\nE               assert (100 * 1024) &amp;lt;= 2787\n\ntests/unit/test_file_validation.py:155: AssertionError\n&#34;}], &#34;tests/unit/test_file_validation.py::TestFileSizeValidation::test_empty_file_validation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileSizeValidation::test_empty_file_validation&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileSizeValidation::test_empty_file_validation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileSizeValidation::test_minimum_viable_file_size&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileSizeValidation::test_minimum_viable_file_size&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileSizeValidation::test_minimum_viable_file_size&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestMimeTypeValidation::test_valid_mime_types&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestMimeTypeValidation::test_valid_mime_types&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestMimeTypeValidation::test_valid_mime_types&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestMimeTypeValidation::test_mime_type_mismatch&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestMimeTypeValidation::test_mime_type_mismatch&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestMimeTypeValidation::test_mime_type_mismatch&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestMimeTypeValidation::test_missing_mime_type&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestMimeTypeValidation::test_missing_mime_type&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestMimeTypeValidation::test_missing_mime_type&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_valid_png_header&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_valid_png_header&#34;, &#34;duration&#34;: &#34;15 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_valid_png_header&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;15 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_valid_jpeg_header&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_valid_jpeg_header&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_valid_jpeg_header&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_corrupted_file_header&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_corrupted_file_header&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_corrupted_file_header&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_fake_extension_file&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_fake_extension_file&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileIntegrityValidation::test_fake_extension_file&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_filename_with_multiple_dots&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_filename_with_multiple_dots&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_filename_with_multiple_dots&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_very_long_filename&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_very_long_filename&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_very_long_filename&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_filename_with_special_characters&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_filename_with_special_characters&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_filename_with_special_characters&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_unicode_filename&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_unicode_filename&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_unicode_filename&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_boundary_conditions&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_boundary_conditions&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_file_validation.py::TestFileValidationEdgeCases::test_boundary_conditions&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_notification_system.py::TestEmailNotifications::test_successful_email_sending&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_notification_system.py::TestEmailNotifications::test_successful_email_sending&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_notification_system.py::TestEmailNotifications::test_successful_email_sending&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_notification_system.py::TestEmailNotifications::test_email_sending_failure&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_notification_system.py::TestEmailNotifications::test_email_sending_failure&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_notification_system.py::TestEmailNotifications::test_email_sending_failure&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_notification_system.py::TestEmailNotifications::test_email_template_generation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_notification_system.py::TestEmailNotifications::test_email_template_generation&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_notification_system.py::TestEmailNotifications::test_email_template_generation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_notification_system.py::TestEmailNotifications::test_email_personalization&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_notification_system.py::TestEmailNotifications::test_email_personalization&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_notification_system.py::TestEmailNotifications::test_email_personalization&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_notification_system.py::TestNotificationFallbacks::test_email_to_file_fallback&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_notification_system.py::TestNotificationFallbacks::test_email_to_file_fallback::setup&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_notification_system.py::TestNotificationFallbacks::test_email_to_file_fallback::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py, line 283\n      @pytest.mark.notification\n      def test_email_to_file_fallback(self, notification_data, tmp_path):\nE       fixture &amp;#x27;notification_data&amp;#x27; not found\n&amp;gt;       available fixtures: _session_faker, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, clean_payments_db, client, cov, create_test_file, create_test_image, doctest_namespace, extra, extras, faker, flask_app, include_metadata_in_junit_xml, invalid_file, large_image_file, metadata, mock_datetime, mock_email_service, mock_serial_generator, mock_uploads_dir, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, requests_mock, sample_payment, sample_payment_in_db, session_mocker, setup_test_environment, temp_dir, test_data_dir, test_fixtures_dir, test_helpers, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, upload_request_data, valid_image_file, worker_id\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py:283\n&#34;}], &#34;tests/unit/test_notification_system.py::TestNotificationFallbacks::test_notification_retry_mechanism&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_notification_system.py::TestNotificationFallbacks::test_notification_retry_mechanism::setup&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_notification_system.py::TestNotificationFallbacks::test_notification_retry_mechanism::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py, line 338\n      @pytest.mark.notification\n      def test_notification_retry_mechanism(self, notification_data, tmp_path):\nE       fixture &amp;#x27;notification_data&amp;#x27; not found\n&amp;gt;       available fixtures: _session_faker, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, clean_payments_db, client, cov, create_test_file, create_test_image, doctest_namespace, extra, extras, faker, flask_app, include_metadata_in_junit_xml, invalid_file, large_image_file, metadata, mock_datetime, mock_email_service, mock_serial_generator, mock_uploads_dir, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, requests_mock, sample_payment, sample_payment_in_db, session_mocker, setup_test_environment, temp_dir, test_data_dir, test_fixtures_dir, test_helpers, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, upload_request_data, valid_image_file, worker_id\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py:338\n&#34;}], &#34;tests/unit/test_notification_system.py::TestNotificationFallbacks::test_multiple_notification_channels&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_notification_system.py::TestNotificationFallbacks::test_multiple_notification_channels::setup&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_notification_system.py::TestNotificationFallbacks::test_multiple_notification_channels::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py, line 418\n      @pytest.mark.notification\n      def test_multiple_notification_channels(self, notification_data):\nE       fixture &amp;#x27;notification_data&amp;#x27; not found\n&amp;gt;       available fixtures: _session_faker, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, clean_payments_db, client, cov, create_test_file, create_test_image, doctest_namespace, extra, extras, faker, flask_app, include_metadata_in_junit_xml, invalid_file, large_image_file, metadata, mock_datetime, mock_email_service, mock_serial_generator, mock_uploads_dir, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, requests_mock, sample_payment, sample_payment_in_db, session_mocker, setup_test_environment, temp_dir, test_data_dir, test_fixtures_dir, test_helpers, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, upload_request_data, valid_image_file, worker_id\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py:418\n&#34;}], &#34;tests/unit/test_notification_system.py::TestNotificationStatus::test_notification_status_tracking&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_notification_system.py::TestNotificationStatus::test_notification_status_tracking::setup&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_notification_system.py::TestNotificationStatus::test_notification_status_tracking::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py, line 504\n      @pytest.mark.notification\n      def test_notification_status_tracking(self, notification_data):\nE       fixture &amp;#x27;notification_data&amp;#x27; not found\n&amp;gt;       available fixtures: _session_faker, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, clean_payments_db, client, cov, create_test_file, create_test_image, doctest_namespace, extra, extras, faker, flask_app, include_metadata_in_junit_xml, invalid_file, large_image_file, metadata, mock_datetime, mock_email_service, mock_serial_generator, mock_uploads_dir, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, requests_mock, sample_payment, sample_payment_in_db, session_mocker, setup_test_environment, temp_dir, test_data_dir, test_fixtures_dir, test_helpers, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, upload_request_data, valid_image_file, worker_id\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py:504\n&#34;}], &#34;tests/unit/test_notification_system.py::TestNotificationStatus::test_notification_metrics_collection&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_notification_system.py::TestNotificationStatus::test_notification_metrics_collection::setup&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_notification_system.py::TestNotificationStatus::test_notification_metrics_collection::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py, line 550\n      @pytest.mark.notification\n      def test_notification_metrics_collection(self, notification_data):\nE       fixture &amp;#x27;notification_data&amp;#x27; not found\n&amp;gt;       available fixtures: _session_faker, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, clean_payments_db, client, cov, create_test_file, create_test_image, doctest_namespace, extra, extras, faker, flask_app, include_metadata_in_junit_xml, invalid_file, large_image_file, metadata, mock_datetime, mock_email_service, mock_serial_generator, mock_uploads_dir, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, requests_mock, sample_payment, sample_payment_in_db, session_mocker, setup_test_environment, temp_dir, test_data_dir, test_fixtures_dir, test_helpers, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, upload_request_data, valid_image_file, worker_id\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py:550\n&#34;}], &#34;tests/unit/test_notification_system.py::TestNotificationStatus::test_notification_user_preferences&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Error&#34;, &#34;testId&#34;: &#34;tests/unit/test_notification_system.py::TestNotificationStatus::test_notification_user_preferences::setup&#34;, &#34;duration&#34;: &#34;0 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_notification_system.py::TestNotificationStatus::test_notification_user_preferences::setup&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;0 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;file /Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py, line 596\n      @pytest.mark.notification\n      def test_notification_user_preferences(self, notification_data):\nE       fixture &amp;#x27;notification_data&amp;#x27; not found\n&amp;gt;       available fixtures: _session_faker, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, clean_payments_db, client, cov, create_test_file, create_test_image, doctest_namespace, extra, extras, faker, flask_app, include_metadata_in_junit_xml, invalid_file, large_image_file, metadata, mock_datetime, mock_email_service, mock_serial_generator, mock_uploads_dir, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, requests_mock, sample_payment, sample_payment_in_db, session_mocker, setup_test_environment, temp_dir, test_data_dir, test_fixtures_dir, test_helpers, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, upload_request_data, valid_image_file, worker_id\n&amp;gt;       use &amp;#x27;pytest --fixtures [testpath]&amp;#x27; for help on them.\n\n/Users/henrique/Desktop/Backup-Matrix/Layout-NOVO-Processo/Andamento-Projeto -Cursor/website/api/tests/unit/test_notification_system.py:596\n&#34;}], &#34;tests/unit/test_payment_association.py::TestPaymentAssociation::test_create_payment_receipt_association&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestPaymentAssociation::test_create_payment_receipt_association&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestPaymentAssociation::test_create_payment_receipt_association&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestPaymentAssociation::test_validate_payment_receipt_match&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestPaymentAssociation::test_validate_payment_receipt_match&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestPaymentAssociation::test_validate_payment_receipt_match&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestPaymentAssociation::test_prevent_duplicate_associations&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestPaymentAssociation::test_prevent_duplicate_associations&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestPaymentAssociation::test_prevent_duplicate_associations&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestPaymentAssociation::test_multiple_receipts_single_payment&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestPaymentAssociation::test_multiple_receipts_single_payment&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestPaymentAssociation::test_multiple_receipts_single_payment&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestAssociationValidation::test_user_ownership_validation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestAssociationValidation::test_user_ownership_validation&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestAssociationValidation::test_user_ownership_validation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestAssociationValidation::test_timing_validation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestAssociationValidation::test_timing_validation&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestAssociationValidation::test_timing_validation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestAssociationValidation::test_amount_validation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestAssociationValidation::test_amount_validation&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestAssociationValidation::test_amount_validation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestAssociationValidation::test_payment_method_compatibility&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestAssociationValidation::test_payment_method_compatibility&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestAssociationValidation::test_payment_method_compatibility&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestAssociationLifecycle::test_association_status_transitions&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestAssociationLifecycle::test_association_status_transitions&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestAssociationLifecycle::test_association_status_transitions&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestAssociationLifecycle::test_association_audit_trail&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestAssociationLifecycle::test_association_audit_trail&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestAssociationLifecycle::test_association_audit_trail&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestAssociationLifecycle::test_association_cleanup_and_archival&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestAssociationLifecycle::test_association_cleanup_and_archival&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestAssociationLifecycle::test_association_cleanup_and_archival&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestAssociationIntegrity::test_referential_integrity&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestAssociationIntegrity::test_referential_integrity&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestAssociationIntegrity::test_referential_integrity&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestAssociationIntegrity::test_data_consistency_validation&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestAssociationIntegrity::test_data_consistency_validation&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestAssociationIntegrity::test_data_consistency_validation&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/unit/test_payment_association.py::TestAssociationIntegrity::test_concurrent_association_handling&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/unit/test_payment_association.py::TestAssociationIntegrity::test_concurrent_association_handling&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/unit/test_payment_association.py::TestAssociationIntegrity::test_concurrent_association_handling&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}]}, &#34;renderCollapsed&#34;: [&#34;passed&#34;], &#34;initialSort&#34;: &#34;result&#34;, &#34;title&#34;: &#34;test_report.html&#34;}"></div>
    <script>
      (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const { getCollapsedCategory, setCollapsedIds } = require('./storage.js')

class DataManager {
    setManager(data) {
        const collapsedCategories = [...getCollapsedCategory(data.renderCollapsed)]
        const collapsedIds = []
        const tests = Object.values(data.tests).flat().map((test, index) => {
            const collapsed = collapsedCategories.includes(test.result.toLowerCase())
            const id = `test_${index}`
            if (collapsed) {
                collapsedIds.push(id)
            }
            return {
                ...test,
                id,
                collapsed,
            }
        })
        const dataBlob = { ...data, tests }
        this.data = { ...dataBlob }
        this.renderData = { ...dataBlob }
        setCollapsedIds(collapsedIds)
    }

    get allData() {
        return { ...this.data }
    }

    resetRender() {
        this.renderData = { ...this.data }
    }

    setRender(data) {
        this.renderData.tests = [...data]
    }

    toggleCollapsedItem(id) {
        this.renderData.tests = this.renderData.tests.map((test) =>
            test.id === id ? { ...test, collapsed: !test.collapsed } : test,
        )
    }

    set allCollapsed(collapsed) {
        this.renderData = { ...this.renderData, tests: [...this.renderData.tests.map((test) => (
            { ...test, collapsed }
        ))] }
    }

    get testSubset() {
        return [...this.renderData.tests]
    }

    get environment() {
        return this.renderData.environment
    }

    get initialSort() {
        return this.data.initialSort
    }
}

module.exports = {
    manager: new DataManager(),
}

},{"./storage.js":8}],2:[function(require,module,exports){
const mediaViewer = require('./mediaviewer.js')
const templateEnvRow = document.getElementById('template_environment_row')
const templateResult = document.getElementById('template_results-table__tbody')

function htmlToElements(html) {
    const temp = document.createElement('template')
    temp.innerHTML = html
    return temp.content.childNodes
}

const find = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return elem.querySelector(selector)
}

const findAll = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return [...elem.querySelectorAll(selector)]
}

const dom = {
    getStaticRow: (key, value) => {
        const envRow = templateEnvRow.content.cloneNode(true)
        const isObj = typeof value === 'object' && value !== null
        const values = isObj ? Object.keys(value).map((k) => `${k}: ${value[k]}`) : null

        const valuesElement = htmlToElements(
            values ? `<ul>${values.map((val) => `<li>${val}</li>`).join('')}<ul>` : `<div>${value}</div>`)[0]
        const td = findAll('td', envRow)
        td[0].textContent = key
        td[1].appendChild(valuesElement)

        return envRow
    },
    getResultTBody: ({ testId, id, log, extras, resultsTableRow, tableHtml, result, collapsed }) => {
        const resultBody = templateResult.content.cloneNode(true)
        resultBody.querySelector('tbody').classList.add(result.toLowerCase())
        resultBody.querySelector('tbody').id = testId
        resultBody.querySelector('.collapsible').dataset.id = id

        resultsTableRow.forEach((html) => {
            const t = document.createElement('template')
            t.innerHTML = html
            resultBody.querySelector('.collapsible').appendChild(t.content)
        })

        if (log) {
            // Wrap lines starting with "E" with span.error to color those lines red
            const wrappedLog = log.replace(/^E.*$/gm, (match) => `<span class="error">${match}</span>`)
            resultBody.querySelector('.log').innerHTML = wrappedLog
        } else {
            resultBody.querySelector('.log').remove()
        }

        if (collapsed) {
            resultBody.querySelector('.collapsible > td')?.classList.add('collapsed')
            resultBody.querySelector('.extras-row').classList.add('hidden')
        } else {
            resultBody.querySelector('.collapsible > td')?.classList.remove('collapsed')
        }

        const media = []
        extras?.forEach(({ name, format_type, content }) => {
            if (['image', 'video'].includes(format_type)) {
                media.push({ path: content, name, format_type })
            }

            if (format_type === 'html') {
                resultBody.querySelector('.extraHTML').insertAdjacentHTML('beforeend', `<div>${content}</div>`)
            }
        })
        mediaViewer.setup(resultBody, media)

        // Add custom html from the pytest_html_results_table_html hook
        tableHtml?.forEach((item) => {
            resultBody.querySelector('td[class="extra"]').insertAdjacentHTML('beforeend', item)
        })

        return resultBody
    },
}

module.exports = {
    dom,
    htmlToElements,
    find,
    findAll,
}

},{"./mediaviewer.js":6}],3:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const storageModule = require('./storage.js')

const getFilteredSubSet = (filter) =>
    manager.allData.tests.filter(({ result }) => filter.includes(result.toLowerCase()))

const doInitFilter = () => {
    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)
}

const doFilter = (type, show) => {
    if (show) {
        storageModule.showCategory(type)
    } else {
        storageModule.hideCategory(type)
    }

    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)

    const sortColumn = storageModule.getSort()
    doSort(sortColumn, true)
}

module.exports = {
    doFilter,
    doInitFilter,
}

},{"./datamanager.js":1,"./sort.js":7,"./storage.js":8}],4:[function(require,module,exports){
const { redraw, bindEvents, renderStatic } = require('./main.js')
const { doInitFilter } = require('./filter.js')
const { doInitSort } = require('./sort.js')
const { manager } = require('./datamanager.js')
const data = JSON.parse(document.getElementById('data-container').dataset.jsonblob)

function init() {
    manager.setManager(data)
    doInitFilter()
    doInitSort()
    renderStatic()
    redraw()
    bindEvents()
}

init()

},{"./datamanager.js":1,"./filter.js":3,"./main.js":5,"./sort.js":7}],5:[function(require,module,exports){
const { dom, find, findAll } = require('./dom.js')
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const { doFilter } = require('./filter.js')
const {
    getVisible,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    getSortDirection,
    possibleFilters,
} = require('./storage.js')

const removeChildren = (node) => {
    while (node.firstChild) {
        node.removeChild(node.firstChild)
    }
}

const renderStatic = () => {
    const renderEnvironmentTable = () => {
        const environment = manager.environment
        const rows = Object.keys(environment).map((key) => dom.getStaticRow(key, environment[key]))
        const table = document.getElementById('environment')
        removeChildren(table)
        rows.forEach((row) => table.appendChild(row))
    }
    renderEnvironmentTable()
}

const addItemToggleListener = (elem) => {
    elem.addEventListener('click', ({ target }) => {
        const id = target.parentElement.dataset.id
        manager.toggleCollapsedItem(id)

        const collapsedIds = getCollapsedIds()
        if (collapsedIds.includes(id)) {
            const updated = collapsedIds.filter((item) => item !== id)
            setCollapsedIds(updated)
        } else {
            collapsedIds.push(id)
            setCollapsedIds(collapsedIds)
        }
        redraw()
    })
}

const renderContent = (tests) => {
    const sortAttr = getSort(manager.initialSort)
    const sortAsc = JSON.parse(getSortDirection())
    const rows = tests.map(dom.getResultTBody)
    const table = document.getElementById('results-table')
    const tableHeader = document.getElementById('results-table-head')

    const newTable = document.createElement('table')
    newTable.id = 'results-table'

    // remove all sorting classes and set the relevant
    findAll('.sortable', tableHeader).forEach((elem) => elem.classList.remove('asc', 'desc'))
    tableHeader.querySelector(`.sortable[data-column-type="${sortAttr}"]`)?.classList.add(sortAsc ? 'desc' : 'asc')
    newTable.appendChild(tableHeader)

    if (!rows.length) {
        const emptyTable = document.getElementById('template_results-table__body--empty').content.cloneNode(true)
        newTable.appendChild(emptyTable)
    } else {
        rows.forEach((row) => {
            if (!!row) {
                findAll('.collapsible td:not(.col-links', row).forEach(addItemToggleListener)
                find('.logexpander', row).addEventListener('click',
                    (evt) => evt.target.parentNode.classList.toggle('expanded'),
                )
                newTable.appendChild(row)
            }
        })
    }

    table.replaceWith(newTable)
}

const renderDerived = () => {
    const currentFilter = getVisible()
    possibleFilters.forEach((result) => {
        const input = document.querySelector(`input[data-test-result="${result}"]`)
        input.checked = currentFilter.includes(result)
    })
}

const bindEvents = () => {
    const filterColumn = (evt) => {
        const { target: element } = evt
        const { testResult } = element.dataset

        doFilter(testResult, element.checked)
        const collapsedIds = getCollapsedIds()
        const updated = manager.renderData.tests.map((test) => {
            return {
                ...test,
                collapsed: collapsedIds.includes(test.id),
            }
        })
        manager.setRender(updated)
        redraw()
    }

    const header = document.getElementById('environment-header')
    header.addEventListener('click', () => {
        const table = document.getElementById('environment')
        table.classList.toggle('hidden')
        header.classList.toggle('collapsed')
    })

    findAll('input[name="filter_checkbox"]').forEach((elem) => {
        elem.addEventListener('click', filterColumn)
    })

    findAll('.sortable').forEach((elem) => {
        elem.addEventListener('click', (evt) => {
            const { target: element } = evt
            const { columnType } = element.dataset
            doSort(columnType)
            redraw()
        })
    })

    document.getElementById('show_all_details').addEventListener('click', () => {
        manager.allCollapsed = false
        setCollapsedIds([])
        redraw()
    })
    document.getElementById('hide_all_details').addEventListener('click', () => {
        manager.allCollapsed = true
        const allIds = manager.renderData.tests.map((test) => test.id)
        setCollapsedIds(allIds)
        redraw()
    })
}

const redraw = () => {
    const { testSubset } = manager

    renderContent(testSubset)
    renderDerived()
}

module.exports = {
    redraw,
    bindEvents,
    renderStatic,
}

},{"./datamanager.js":1,"./dom.js":2,"./filter.js":3,"./sort.js":7,"./storage.js":8}],6:[function(require,module,exports){
class MediaViewer {
    constructor(assets) {
        this.assets = assets
        this.index = 0
    }

    nextActive() {
        this.index = this.index === this.assets.length - 1 ? 0 : this.index + 1
        return [this.activeFile, this.index]
    }

    prevActive() {
        this.index = this.index === 0 ? this.assets.length - 1 : this.index -1
        return [this.activeFile, this.index]
    }

    get currentIndex() {
        return this.index
    }

    get activeFile() {
        return this.assets[this.index]
    }
}


const setup = (resultBody, assets) => {
    if (!assets.length) {
        resultBody.querySelector('.media').classList.add('hidden')
        return
    }

    const mediaViewer = new MediaViewer(assets)
    const container = resultBody.querySelector('.media-container')
    const leftArrow = resultBody.querySelector('.media-container__nav--left')
    const rightArrow = resultBody.querySelector('.media-container__nav--right')
    const mediaName = resultBody.querySelector('.media__name')
    const counter = resultBody.querySelector('.media__counter')
    const imageEl = resultBody.querySelector('img')
    const sourceEl = resultBody.querySelector('source')
    const videoEl = resultBody.querySelector('video')

    const setImg = (media, index) => {
        if (media?.format_type === 'image') {
            imageEl.src = media.path

            imageEl.classList.remove('hidden')
            videoEl.classList.add('hidden')
        } else if (media?.format_type === 'video') {
            sourceEl.src = media.path

            videoEl.classList.remove('hidden')
            imageEl.classList.add('hidden')
        }

        mediaName.innerText = media?.name
        counter.innerText = `${index + 1} / ${assets.length}`
    }
    setImg(mediaViewer.activeFile, mediaViewer.currentIndex)

    const moveLeft = () => {
        const [media, index] = mediaViewer.prevActive()
        setImg(media, index)
    }
    const doRight = () => {
        const [media, index] = mediaViewer.nextActive()
        setImg(media, index)
    }
    const openImg = () => {
        window.open(mediaViewer.activeFile.path, '_blank')
    }
    if (assets.length === 1) {
        container.classList.add('media-container--fullscreen')
    } else {
        leftArrow.addEventListener('click', moveLeft)
        rightArrow.addEventListener('click', doRight)
    }
    imageEl.addEventListener('click', openImg)
}

module.exports = {
    setup,
}

},{}],7:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const storageModule = require('./storage.js')

const genericSort = (list, key, ascending, customOrder) => {
    let sorted
    if (customOrder) {
        sorted = list.sort((a, b) => {
            const aValue = a.result.toLowerCase()
            const bValue = b.result.toLowerCase()

            const aIndex = customOrder.findIndex((item) => item.toLowerCase() === aValue)
            const bIndex = customOrder.findIndex((item) => item.toLowerCase() === bValue)

            // Compare the indices to determine the sort order
            return aIndex - bIndex
        })
    } else {
        sorted = list.sort((a, b) => a[key] === b[key] ? 0 : a[key] > b[key] ? 1 : -1)
    }

    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const durationSort = (list, ascending) => {
    const parseDuration = (duration) => {
        if (duration.includes(':')) {
            // If it's in the format "HH:mm:ss"
            const [hours, minutes, seconds] = duration.split(':').map(Number)
            return (hours * 3600 + minutes * 60 + seconds) * 1000
        } else {
            // If it's in the format "nnn ms"
            return parseInt(duration)
        }
    }
    const sorted = list.sort((a, b) => parseDuration(a['duration']) - parseDuration(b['duration']))
    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const doInitSort = () => {
    const type = storageModule.getSort(manager.initialSort)
    const ascending = storageModule.getSortDirection()
    const list = manager.testSubset
    const initialOrder = ['Error', 'Failed', 'Rerun', 'XFailed', 'XPassed', 'Skipped', 'Passed']

    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    if (type?.toLowerCase() === 'original') {
        manager.setRender(list)
    } else {
        let sortedList
        switch (type) {
        case 'duration':
            sortedList = durationSort(list, ascending)
            break
        case 'result':
            sortedList = genericSort(list, type, ascending, initialOrder)
            break
        default:
            sortedList = genericSort(list, type, ascending)
            break
        }
        manager.setRender(sortedList)
    }
}

const doSort = (type, skipDirection) => {
    const newSortType = storageModule.getSort(manager.initialSort) !== type
    const currentAsc = storageModule.getSortDirection()
    let ascending
    if (skipDirection) {
        ascending = currentAsc
    } else {
        ascending = newSortType ? false : !currentAsc
    }
    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    const list = manager.testSubset
    const sortedList = type === 'duration' ? durationSort(list, ascending) : genericSort(list, type, ascending)
    manager.setRender(sortedList)
}

module.exports = {
    doInitSort,
    doSort,
}

},{"./datamanager.js":1,"./storage.js":8}],8:[function(require,module,exports){
const possibleFilters = [
    'passed',
    'skipped',
    'failed',
    'error',
    'xfailed',
    'xpassed',
    'rerun',
]

const getVisible = () => {
    const url = new URL(window.location.href)
    const settings = new URLSearchParams(url.search).get('visible')
    const lower = (item) => {
        const lowerItem = item.toLowerCase()
        if (possibleFilters.includes(lowerItem)) {
            return lowerItem
        }
        return null
    }
    return settings === null ?
        possibleFilters :
        [...new Set(settings?.split(',').map(lower).filter((item) => item))]
}

const hideCategory = (categoryToHide) => {
    const url = new URL(window.location.href)
    const visibleParams = new URLSearchParams(url.search).get('visible')
    const currentVisible = visibleParams ? visibleParams.split(',') : [...possibleFilters]
    const settings = [...new Set(currentVisible)].filter((f) => f !== categoryToHide).join(',')

    url.searchParams.set('visible', settings)
    window.history.pushState({}, null, unescape(url.href))
}

const showCategory = (categoryToShow) => {
    if (typeof window === 'undefined') {
        return
    }
    const url = new URL(window.location.href)
    const currentVisible = new URLSearchParams(url.search).get('visible')?.split(',').filter(Boolean) ||
        [...possibleFilters]
    const settings = [...new Set([categoryToShow, ...currentVisible])]
    const noFilter = possibleFilters.length === settings.length || !settings.length

    noFilter ? url.searchParams.delete('visible') : url.searchParams.set('visible', settings.join(','))
    window.history.pushState({}, null, unescape(url.href))
}

const getSort = (initialSort) => {
    const url = new URL(window.location.href)
    let sort = new URLSearchParams(url.search).get('sort')
    if (!sort) {
        sort = initialSort || 'result'
    }
    return sort
}

const setSort = (type) => {
    const url = new URL(window.location.href)
    url.searchParams.set('sort', type)
    window.history.pushState({}, null, unescape(url.href))
}

const getCollapsedCategory = (renderCollapsed) => {
    let categories
    if (typeof window !== 'undefined') {
        const url = new URL(window.location.href)
        const collapsedItems = new URLSearchParams(url.search).get('collapsed')
        switch (true) {
        case !renderCollapsed && collapsedItems === null:
            categories = ['passed']
            break
        case collapsedItems?.length === 0 || /^["']{2}$/.test(collapsedItems):
            categories = []
            break
        case /^all$/.test(collapsedItems) || collapsedItems === null && /^all$/.test(renderCollapsed):
            categories = [...possibleFilters]
            break
        default:
            categories = collapsedItems?.split(',').map((item) => item.toLowerCase()) || renderCollapsed
            break
        }
    } else {
        categories = []
    }
    return categories
}

const getSortDirection = () => JSON.parse(sessionStorage.getItem('sortAsc')) || false
const setSortDirection = (ascending) => sessionStorage.setItem('sortAsc', ascending)

const getCollapsedIds = () => JSON.parse(sessionStorage.getItem('collapsedIds')) || []
const setCollapsedIds = (list) => sessionStorage.setItem('collapsedIds', JSON.stringify(list))

module.exports = {
    getVisible,
    hideCategory,
    showCategory,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    setSort,
    getSortDirection,
    setSortDirection,
    getCollapsedCategory,
    possibleFilters,
}

},{}]},{},[4]);
    </script>
  </footer>
</html>